1                                       The SAS System            12:23 Saturday, July 25, 2015

NOTE: Copyright (c) 2002-2008 by SAS Institute Inc., Cary, NC, USA. 
NOTE: SAS (r) Proprietary Software 9.2 (TS2M3) 
      Licensed to THE URBAN INSTITUTE, Site 70097024.
NOTE: This session is executing on the X64_VSHOME  platform.



NOTE: SAS initialization used:
      real time           1.36 seconds
      cpu time            2.68 seconds
      

NOTE: AUTOEXEC processing beginning; file is C:\Users\Peter\Documents\My SAS 
      Files\9.2\Autoexnt.sas.


NOTE: AUTOEXEC processing completed.

1          /**************************************************************************
2           Program:  Update_Sec8mf_2014_11_a.sas
3           Library:  PresCat
4           Project:  NeighborhoodInfo DC
5           Author:   P. Tatian
6           Created:  12/24/14
7           Version:  SAS 9.2
8           Environment:  Local Windows session (desktop)
9          
10          Description:  Update Preservation Catalog with latest HUD Sec 8 MF
11          update file.
12         
13          UPDATE PRESCAT.SUBSIDY
14         
15          Modifications:
16         **************************************************************************/
17         
18         /*%include "L:\SAS\Inc\StdLocal.sas";*/
19         %include "C:\DCData\SAS\Inc\StdLocal.sas";
NOTE: Library _METADAT does not exist.
64        +
65        +options ls=124 ps=48;    ** Landscape **;
66        +
67        +** Output title **;
68        +
69        +title "&_library/&_program:  NeighborhoodInfo DC";
70        +
71        +** Define General library for local session only **;
2 The SAS System                                                                               12:23 Saturday, July 25, 2015

72        +
73        +%DCData_lib( General, env=windows, macdef=dcautos uiautos sasautos )
MPRINT(DCDATA_LIB):   options nomprint;
NOTE: Libref GENERA_L was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: C:\DCData\Libraries\General\Data
NOTE: Libname GENERA_R refers to the same physical library as GENERA_L.
NOTE: Libref GENERA_R was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: C:\DCData\Libraries\General\Data
NOTE: Libref GENERAL was successfully assigned as follows: 
      Levels:           2
      Engine(1):        V9 
      Physical Name(1): C:\DCData\Libraries\General\Data
      Engine(2):        V9 
      Physical Name(2): C:\DCData\Libraries\General\Data

=====================================================================
Current FmtSearch Option value:

     WORK* LIBRARY* GENERAL

   *implicitly included by default.

=====================================================================
Status of current catalogs:

NOTE:    WORK.FORMATS DOES NOT EXIST
NOTE:    LIBRARY.FORMATS DOES NOT EXIST
NOTE:    GENERAL.FORMATS EXISTS
=====================================================================


=====================================================================
Current Sasautos Option value:

     GENERA_L DCAUTOS UIAUTOS SASAUTOS

=====================================================================


=====================================================================
Current Sasautos Option value:

     GENERA_L  GENERA_R DCAUTOS UIAUTOS SASAUTOS

3 The SAS System                                                                               12:23 Saturday, July 25, 2015

=====================================================================

74        +
75        +%let _userid = %sysfunc( putc( %lowcase(&SYSUSERID), $longusr. ) );
NOTE: %INCLUDE (level 1) ending.
76         
77         ** Define libraries **;
78         %DCData_lib( PresCat, local=n )
MPRINT(DCDATA_LIB):   options nomprint;
NOTE: Libref PRESCA_R was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: C:\DCData\Libraries\PresCat\Data
NOTE: Libref PRESCAT was successfully assigned as follows: 
      Levels:           1
      Engine(1):        V9 
      Physical Name(1): C:\DCData\Libraries\PresCat\Data

=====================================================================
Current FmtSearch Option value:

     WORK* LIBRARY* GENERAL PRESCAT

   *implicitly included by default.

=====================================================================
Status of current catalogs:

NOTE:    WORK.FORMATS DOES NOT EXIST
NOTE:    LIBRARY.FORMATS DOES NOT EXIST
NOTE:    GENERAL.FORMATS EXISTS
NOTE:    PRESCAT.FORMATS EXISTS
=====================================================================


=====================================================================
Current Sasautos Option value:

     PRESCA_R GENERA_L GENERA_R DCAUTOS UIAUTOS SASAUTOS

=====================================================================

79         %DCData_lib( HUD, local=n )
MPRINT(DCDATA_LIB):   options nomprint;
NOTE: Libref HUD_R was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: C:\DCData\Libraries\HUD\Data
4 The SAS System                                                                               12:23 Saturday, July 25, 2015

NOTE: Libref HUD was successfully assigned as follows: 
      Levels:           1
      Engine(1):        V9 
      Physical Name(1): C:\DCData\Libraries\HUD\Data

=====================================================================
Current FmtSearch Option value:

     WORK* LIBRARY* GENERAL PRESCAT HUD

   *implicitly included by default.

=====================================================================
Status of current catalogs:

NOTE:    WORK.FORMATS DOES NOT EXIST
NOTE:    LIBRARY.FORMATS DOES NOT EXIST
NOTE:    GENERAL.FORMATS EXISTS
NOTE:    PRESCAT.FORMATS EXISTS
NOTE:    HUD.FORMATS DOES NOT EXIST
=====================================================================


=====================================================================
Current Sasautos Option value:

     PRESCA_R  HUD_R GENERA_L GENERA_R DCAUTOS UIAUTOS SASAUTOS

=====================================================================

80         
81         %let Subsidy_info_source = "HUD/MFA";
82         %let Update_file = Sec8mf_2014_11;
83         %let Finalize = N;
84         %let NO_SUBSIDY_ID = 9999999999;
85         %let Update_dtm = %sysfunc( datetime() );
86         
87         %let Subsidy_update_vars =
88             Units_Assist POA_start POA_end Compl_end
89             rent_to_FMR_description Subsidy_Active Program
90             ;
91         
92         %let Subsidy_tech_vars = Subsidy_Info_Source Subsidy_Info_Source_ID Subsidy_Info_Source_Date Update_Dtm;
93         
94         %let Subsidy_missing_info_vars =
95             contract_number property_name_text address_line1_text program_type_name
5 The SAS System                                                                               12:23 Saturday, July 25, 2015

96             ;
97         
98         %let Project_update_vars =
99             Hud_Own_Effect_dt Hud_Own_Name Hud_Own_Type Hud_Mgr_Name
100            Hud_Mgr_Type Update_Dtm;
101        
102        %let Project_missing_info_vars = ;
103        
104        proc sql noprint;
105          select Extract_date into :Subsidy_Info_Source_Date from Hud.&Update_file._dc;
106        quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.13 seconds
      cpu time            0.10 seconds
      

107        
108        %put _user_;
GLOBAL FINALIZE N
GLOBAL SQLOBS 1
GLOBAL PROJECT_UPDATE_VARS Hud_Own_Effect_dt Hud_Own_Name Hud_Own_Type Hud_Mgr_Name     Hud_Mgr_Type Update_Dtm
GLOBAL PROJECT_MISSING_INFO_VARS 
GLOBAL SQLOOPS 16
GLOBAL UPDATE_DTM 1753446230.757
GLOBAL _RECURSE 
GLOBAL UPDATE_FILE Sec8mf_2014_11
GLOBAL SYS_SQL_IP_ALL -1
GLOBAL SYS_SQL_IP_STMT 
GLOBAL _REMOTE_SESSION 0
GLOBAL _DCDATA_L_DRIVE C
GLOBAL _DCDATA_R_DRIVE C
GLOBAL _DCDATA_L_PATH C:\DCData\Libraries
GLOBAL _DCDATA_R_PATH C:\DCData\Libraries
GLOBAL _DCDATA_PATH C:\DCData\Libraries
GLOBAL NO_SUBSIDY_ID 9999999999
GLOBAL SQLXOBS 0
GLOBAL SQLRC 0
GLOBAL _USERID peter
GLOBAL _LIBRARY PRESCAT
GLOBAL _PROGRAM Update_Sec8mf_2014_11_a.sas
GLOBAL SUBSIDY_INFO_SOURCE "HUD/MFA"
GLOBAL SUBSIDY_UPDATE_VARS Units_Assist POA_start POA_end Compl_end      rent_to_FMR_description Subsidy_Active Program
GLOBAL SUBSIDY_TECH_VARS Subsidy_Info_Source Subsidy_Info_Source_ID Subsidy_Info_Source_Date Update_Dtm
GLOBAL SUBSIDY_MISSING_INFO_VARS contract_number property_name_text address_line1_text program_type_name
GLOBAL SQLEXITCODE 0
GLOBAL SUBSIDY_INFO_SOURCE_DATE 11/25/2014
6 The SAS System                                                                               12:23 Saturday, July 25, 2015

GLOBAL _NEWFMS GENERAL PRESCAT
109        
110        **************************************************************************;
111        ***** Create test version of subsidy exception file **;
112        
113        data Subsidy_except_test;
114        
115          set PresCat.Subsidy_except_test;
116        
117          /***********
118          ** Exception for updated var **;
119          nlihc_id = "NL000001";
120          Subsidy_id = 3;
121          POA_start = '01oct2004'd;
122          Except_date = date();
123          Except_init = 'PAT';
124          output;
125        
126          ** Exception for nonupdated var **;
127          nlihc_id = "NL000021";
128          Subsidy_id = 2;
129          POA_start = .;
130          POA_end = '30nov2024'd;
131          Compl_end = .;
132          Except_date = date();
133          Except_init = 'PAT';
134          output;
135        
136          ** Exception same as updated var **;
137          nlihc_id = "NL000023";
138          Subsidy_id = 2;
139          POA_start = '21dec2011'd;
140          POA_end = .;
141          Except_date = date();
142          Except_init = 'PAT';
143          output;
144        
145          ** Exception for nonupdated obs **;
146          nlihc_id = "NL000029";
147          Subsidy_id = 2;
148          POA_start = .;
149          POA_end = '31oct2044'd;
150          Except_date = date();
151          Except_init = 'PAT';
152          output;
153        
7 The SAS System                                                                               12:23 Saturday, July 25, 2015

154          ** Multiple exception records **;
155          nlihc_id = "NL000046";
156          Subsidy_id = 3;
157          POA_start = '28feb2014'd;
158          POA_end = '28feb2025'd;
159          rent_to_fmr_description = 'Old desc';
160          Except_date = '28feb2014'd;
161          Except_init = 'PAT';
162          output;
163          POA_start = .;
164          POA_end = '28feb2030'd;
165          Units_assist = .u;
166          Except_date = date();
167          Except_init = 'PAT';
168          rent_to_fmr_description = 'New desc';
169          output;
170          ************************/
171        
172        run;

NOTE: There were 6 observations read from the data set PRESCAT.SUBSIDY_EXCEPT_TEST.
NOTE: The data set WORK.SUBSIDY_EXCEPT_TEST has 6 observations and 14 variables.
NOTE: Compressing data set WORK.SUBSIDY_EXCEPT_TEST increased size by 100.00 percent. 
      Compressed is 2 pages; un-compressed would require 1 pages.
NOTE: DATA statement used (Total process time):
      real time           0.10 seconds
      cpu time            0.04 seconds
      

173        
174        %File_info( data=Subsidy_except_test, contents=n, stats= )
MPRINT(FILE_INFO):   title2 "File = Subsidy_except_test";
MPRINT(FILE_INFO):   proc print data=Subsidy_except_test (obs=10);
MPRINT(FILE_INFO):   title3 "Printing first 10 obs.";
MPRINT(FILE_INFO):   run;

NOTE: There were 6 observations read from the data set WORK.SUBSIDY_EXCEPT_TEST.
NOTE: The PROCEDURE PRINT printed page 1.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.17 seconds
      cpu time            0.10 seconds
      

MPRINT(FILE_INFO):   title3;
MPRINT(FILE_INFO):   title2;
175        
8 The SAS System                                                                               12:23 Saturday, July 25, 2015

176        
177        ***** NORMALIZE EXCEPTION FILE *****;
178        
179        ***options mprint symbolgen mlogic spool;
180        
181        %Except_norm( lib=work, data=Subsidy_except_test, by=nlihc_id subsidy_id )
MPRINT(EXCEPT_NORM):   proc sql noprint;
MPRINT(EXCEPT_NORM):   select distinct name into :charvarlist separated by ' ' from dictionary.columns where libname="WORK" 
and memname="SUBSIDY_EXCEPT_TEST" and type='char';
MPRINT(EXCEPT_NORM):   select distinct name into :numvarlist separated by ' ' from dictionary.columns where libname="WORK" 
and memname="SUBSIDY_EXCEPT_TEST" and type='num';
MPRINT(EXCEPT_NORM):   quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.07 seconds
      cpu time            0.03 seconds
      

MPRINT(EXCEPT_NORM):   proc sort data=work.Subsidy_except_test out=Subsidy_except_test_srt;
MPRINT(EXCEPT_NORM):   by nlihc_id subsidy_id descending except_date;
MPRINT(EXCEPT_NORM):   run;

NOTE: There were 6 observations read from the data set WORK.SUBSIDY_EXCEPT_TEST.
NOTE: SAS sort was used.
NOTE: The data set WORK.SUBSIDY_EXCEPT_TEST_SRT has 6 observations and 14 variables.
NOTE: Compressing data set WORK.SUBSIDY_EXCEPT_TEST_SRT increased size by 100.00 percent. 
      Compressed is 2 pages; un-compressed would require 1 pages.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.02 seconds
      cpu time            0.01 seconds
      

NOTE: [ListChangeDelim] Processing list=agency program contract_number rent_to_fmr_description
NOTE: [ListChangeDelim] New list=agency_ret program_ret contract_number_ret rent_to_fmr_description_ret
NOTE: [ListChangeDelim] Processing list=compl_end poa_end poa_start poa_start_orig subsidy_active units_assist
NOTE: [ListChangeDelim] New list=compl_end_ret poa_end_ret poa_start_ret poa_start_orig_ret subsidy_active_ret 
units_assist_ret
EXCEPT_NORM DATA Subsidy_except_test
EXCEPT_NORM NUMVARLIST Compl_end Except_date POA_end POA_start POA_start_orig Subsidy_Active Subsidy_id Units_Assist
EXCEPT_NORM NUMVARLISTCLEAN compl_end poa_end poa_start poa_start_orig subsidy_active units_assist
EXCEPT_NORM NUMVARLISTRET compl_end_ret poa_end_ret poa_start_ret poa_start_orig_ret subsidy_active_ret 
units_assist_ret
EXCEPT_NORM OUT Subsidy_except_test_norm
EXCEPT_NORM LIB work
EXCEPT_NORM CHARVARLIST Agency Except_init Nlihc_id Program contract_number rent_to_fmr_description
EXCEPT_NORM CHARVARLISTCLEAN agency program contract_number rent_to_fmr_description
EXCEPT_NORM CHARVARLISTRET agency_ret program_ret contract_number_ret rent_to_fmr_description_ret
9 The SAS System                                                                               12:23 Saturday, July 25, 2015

EXCEPT_NORM LASTBY subsidy_id
EXCEPT_NORM BY nlihc_id subsidy_id
MPRINT(EXCEPT_NORM):   data Subsidy_except_test_norm;
MPRINT(EXCEPT_NORM):   set Subsidy_except_test_srt;
MPRINT(EXCEPT_NORM):   by nlihc_id subsidy_id;
MPRINT(EXCEPT_NORM):   length agency_ret program_ret contract_number_ret rent_to_fmr_description_ret $ 400;
MPRINT(EXCEPT_NORM):   length compl_end_ret poa_end_ret poa_start_ret poa_start_orig_ret subsidy_active_ret 
units_assist_ret 8;
MPRINT(EXCEPT_NORM):   retain agency_ret program_ret contract_number_ret rent_to_fmr_description_ret;
MPRINT(EXCEPT_NORM):   retain compl_end_ret poa_end_ret poa_start_ret poa_start_orig_ret subsidy_active_ret 
units_assist_ret;
MPRINT(EXCEPT_NORM):   array cvar{*} agency program contract_number rent_to_fmr_description;
MPRINT(EXCEPT_NORM):   array cret{*} agency_ret program_ret contract_number_ret rent_to_fmr_description_ret;
MPRINT(EXCEPT_NORM):   array nvar{*} compl_end poa_end poa_start poa_start_orig subsidy_active units_assist;
MPRINT(EXCEPT_NORM):   array nret{*} compl_end_ret poa_end_ret poa_start_ret poa_start_orig_ret subsidy_active_ret 
units_assist_ret;
MPRINT(EXCEPT_NORM):   if first.subsidy_id then do;
MPRINT(EXCEPT_NORM):   do i = 1 to dim( cret );
MPRINT(EXCEPT_NORM):   cret{i} = '';
MPRINT(EXCEPT_NORM):   end;
MPRINT(EXCEPT_NORM):   do i = 1 to dim( nret );
MPRINT(EXCEPT_NORM):   nret{i} = .;
MPRINT(EXCEPT_NORM):   end;
MPRINT(EXCEPT_NORM):   end;
MPRINT(EXCEPT_NORM):   do i = 1 to dim( cret );
MPRINT(EXCEPT_NORM):   if cret{i} = '' then cret{i} = cvar{i};
MPRINT(EXCEPT_NORM):   else if cvar{i} ~= '' then do;
MPRINT(WARN_PUT):   put "WARN" "ING:" " " "Multiple exceptions specified: " (nlihc_id subsidy_id) (=) cvar{i}= except_date=;
MPRINT(EXCEPT_NORM):   end;
MPRINT(EXCEPT_NORM):   end;
MPRINT(EXCEPT_NORM):   do i = 1 to dim( nret );
MPRINT(EXCEPT_NORM):   if nret{i} = . then nret{i} = nvar{i};
MPRINT(EXCEPT_NORM):   else if nvar{i} ~= . then do;
MPRINT(WARN_PUT):   put "WARN" "ING:" " " "Multiple exceptions specified: " (nlihc_id subsidy_id) (=) nvar{i}= except_date=;
MPRINT(EXCEPT_NORM):   end;
MPRINT(EXCEPT_NORM):   end;
MPRINT(EXCEPT_NORM):   if last.subsidy_id then do;
MPRINT(EXCEPT_NORM):   do i = 1 to dim( cret );
MPRINT(EXCEPT_NORM):   cvar{i} = cret{i};
MPRINT(EXCEPT_NORM):   end;
MPRINT(EXCEPT_NORM):   do i = 1 to dim( nret );
MPRINT(EXCEPT_NORM):   nvar{i} = nret{i};
MPRINT(EXCEPT_NORM):   end;
MPRINT(EXCEPT_NORM):   output;
MPRINT(EXCEPT_NORM):   end;
MPRINT(EXCEPT_NORM):   drop i agency_ret program_ret contract_number_ret rent_to_fmr_description_ret compl_end_ret 
10 The SAS System                                                                              12:23 Saturday, July 25, 2015

poa_end_ret poa_start_ret poa_start_orig_ret subsidy_active_ret units_assist_ret Except_: ;
MPRINT(EXCEPT_NORM):   run;

WARNING: Multiple exceptions specified: Nlihc_id=NL000046 Subsidy_id=3 rent_to_fmr_description=Old desc
Except_date=02/28/2014
WARNING: Multiple exceptions specified: Nlihc_id=NL000046 Subsidy_id=3 POA_end=02/28/2025 Except_date=02/28/2014
NOTE: There were 6 observations read from the data set WORK.SUBSIDY_EXCEPT_TEST_SRT.
NOTE: The data set WORK.SUBSIDY_EXCEPT_TEST_NORM has 5 observations and 12 variables.
NOTE: Compressing data set WORK.SUBSIDY_EXCEPT_TEST_NORM increased size by 100.00 percent. 
      Compressed is 2 pages; un-compressed would require 1 pages.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

182        
183          proc print data=Subsidy_except_test_norm;
184            id nlihc_id subsidy_id;
185            title2 "File = Subsidy_except_test_norm";
186          run;

NOTE: There were 5 observations read from the data set WORK.SUBSIDY_EXCEPT_TEST_NORM.
NOTE: The PROCEDURE PRINT printed page 2.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

187        
188        
189        ********************************************************************************;
190        ** Update subsidy file;
191        
192        ** Get Category IDs **;
193        
194        %Data_to_format(
195          FmtLib=work,
196          FmtName=$nlihcid2cat,
197          Desc=,
198          Data=PresCat.Project_category,
199          Value=nlihc_id,
200          Label=category_code,
201          OtherLabel='',
202          DefaultLen=1,
203          Print=N,
204          Contents=N
11 The SAS System                                                                              12:23 Saturday, July 25, 2015

205          )
NOTE: [Data_to_format] Starting macro.
MPRINT(DATA_TO_FORMAT):   data _cntlin (compress=no);
MPRINT(DATA_TO_FORMAT):   length hlo $ 8;
MPRINT(DATA_TO_FORMAT):   retain fmtname "$nlihcid2cat" type "C" default 1 max . min .;
MPRINT(DATA_TO_FORMAT):   retain hlo " ";
MPRINT(DATA_TO_FORMAT):   set PresCat.Project_category end=last;
MPRINT(DATA_TO_FORMAT):   label = category_code;
MPRINT(DATA_TO_FORMAT):   start = nlihc_id;
MPRINT(DATA_TO_FORMAT):   output;
MPRINT(DATA_TO_FORMAT):   if last then do;
MPRINT(DATA_TO_FORMAT):   hlo = trim( hlo ) || 'o';
MPRINT(DATA_TO_FORMAT):   label = '';
MPRINT(DATA_TO_FORMAT):   output;
MPRINT(DATA_TO_FORMAT):   end;
MPRINT(DATA_TO_FORMAT):   keep fmtname type hlo label start default max min;
MPRINT(DATA_TO_FORMAT):   run;

NOTE: There were 362 observations read from the data set PRESCAT.PROJECT_CATEGORY.
NOTE: The data set WORK._CNTLIN has 363 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.00 seconds
      

MPRINT(DATA_TO_FORMAT):   proc format library=work cntlin=_cntlin;
NOTE: Format $NLIHCID2CAT has been output.
MPRINT(DATA_TO_FORMAT):   run;

NOTE: PROCEDURE FORMAT used (Total process time):
      real time           0.13 seconds
      cpu time            0.01 seconds
      
NOTE: There were 363 observations read from the data set WORK._CNTLIN.

MPRINT(DATA_TO_FORMAT):   proc datasets library=work memtype=(data) nolist;
MPRINT(DATA_TO_FORMAT):   delete _cntlin;
MPRINT(DATA_TO_FORMAT):   quit;

NOTE: Deleting WORK._CNTLIN (memtype=DATA).
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.04 seconds
      cpu time            0.01 seconds
      

NOTE: [Data_to_format] Exiting macro.
12 The SAS System                                                                              12:23 Saturday, July 25, 2015

206        
207        data Sec8MF_subsidy_update;
208        
209          set Hud.&Update_file._dc;
210          where not( program_type_name = "UnasstPrj SCHAP" and assisted_units_count = 0 );
211        
212          ** Create update variables **;
213        
214          length
215            Units_Assist POA_start POA_end Compl_end 8
216            Subsidy_Active 3
217            Subsidy_Info_Source $ 40
218            Subsidy_Info_Source_ID $ 40
219            Subsidy_Info_Source_Date 8
220            Update_Dtm 8
221          ;
222        
223          retain Subsidy_Info_Source &Subsidy_Info_Source;
224        
225          Subsidy_Info_Source_ID = trim( left( put( property_id, 16. ) ) ) || "/" ||
226                                   left( contract_number );
227        
228          Subsidy_Info_Source_Date = extract_date;
229        
230          Update_Dtm = &Update_Dtm;
231        
232          if assisted_units_count > 0 then Units_Assist = assisted_units_count;
233        
234          POA_start = tracs_effective_date;
235        
236          POA_end = tracs_overall_expiration_date;
237        
238          Compl_end = POA_end;
239        
240          if tracs_status in ( 'T' ) then Subsidy_Active = 0;
241          else Subsidy_Active = 1;
242        
243          ** Program code **;
244        
245          length Program $ 32;
246        
247          Program = put( program_type_name, $mfatoprog. );
248        
249          if missing( Program ) then do;
250            %warn_put( msg="Missing program type: " _n_= property_id= contract_number= assisted_units_count=
250      ! program_type_name= )
13 The SAS System                                                                              12:23 Saturday, July 25, 2015

MPRINT(WARN_PUT):   put "WARN" "ING:" " " "Missing program type: " _n_= property_id= contract_number= assisted_units_count= 
program_type_name=;
251          end;
252        
253          /********** SKIP FOR NOW ************
254          length Agency $ 80;
255        
256          if Program = "Low Income Housing Tax Credit" then Agency = "DC Dept of Housing and Community Development; DC
256      ! Housing Finance Agency";
257          else if Subsidy_info_Source =: "DCFHA" then Agency = "DC Housing Finance Agency";
258          else if Subsidy_Info_Source =: "DCHA" then Agency = "DC Housing Authority";
259          else if Subsidy_Info_Source in ( "Email from KIM DCHA", "Email from Kim Cole DCHA" ) then Agency = "DC Housing
259      ! Authority";
260          else if Subsidy_Info_Source =: "DHCD" then Agency = "DC Dept of Housing and Community Development";
261          else if Subsidy_Info_Source =: "DC/" then Agency = "DC";
262          else if Subsidy_Info_Source =: "HUD" then Agency = "US Dept of Housing and Urban Development";
263          else Agency = "Other";
264          **********************************/
265        
266          format POA_start POA_end Compl_end Subsidy_Info_Source_Date mmddyy10. Update_Dtm datetime16.;
267        
268          keep
269            Units_Assist POA_start POA_end Compl_end
270            contract_number rent_to_FMR_description Subsidy_Active
271            Subsidy_Info_Source
272            Subsidy_Info_Source_ID Subsidy_Info_Source_Date Update_Dtm
273            Program
274            property_name_text address_line1_text program_type_name
275            ownership_effective_date
276            owner_organization_name owner_individual_full_name
277            owner_organization_name owner_individual_full_name
278            mgmt_agent_org_name mgmt_agent_full_name
279            mgmt_agent_org_name mgmt_agent_full_name;
280        
281        run;

NOTE: Format $S8EXQTR was not found or could not be loaded.
NOTE: Format $S8DOCTY was not found or could not be loaded.
NOTE: Format $S8PGMNM was not found or could not be loaded.
NOTE: Format $S8PGMGR was not found or could not be loaded.
NOTE: Format $S8STAT was not found or could not be loaded.
NOTE: Format $S8PRPCT was not found or could not be loaded.
NOTE: Format $S8PRFIN was not found or could not be loaded.
NOTE: Format $S8OWMGT was not found or could not be loaded.
NOTE: Format $S8OWMGT was not found or could not be loaded.
NOTE: Format $S8PGMNM was not found or could not be loaded.
14 The SAS System                                                                              12:23 Saturday, July 25, 2015

NOTE: There were 110 observations read from the data set HUD.SEC8MF_2014_11_DC.
      WHERE (program_type_name not = 'UnasstPrj SCHAP') or (assisted_units_count not = 0);
NOTE: The data set WORK.SEC8MF_SUBSIDY_UPDATE has 110 observations and 20 variables.
NOTE: Compressing data set WORK.SEC8MF_SUBSIDY_UPDATE decreased size by 40.00 percent. 
      Compressed is 3 pages; un-compressed would require 5 pages.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

282        
283        proc sort data=Sec8MF_subsidy_update;
284          by Subsidy_Info_Source_ID;
285        run;

NOTE: There were 110 observations read from the data set WORK.SEC8MF_SUBSIDY_UPDATE.
NOTE: SAS sort was used.
NOTE: The data set WORK.SEC8MF_SUBSIDY_UPDATE has 110 observations and 20 variables.
NOTE: Compressing data set WORK.SEC8MF_SUBSIDY_UPDATE decreased size by 40.00 percent. 
      Compressed is 3 pages; un-compressed would require 5 pages.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

286        
287        %File_info( data=Sec8MF_subsidy_update, freqvars=Program Subsidy_Info_Source_Date )
MPRINT(FILE_INFO):   title2 "File = Sec8MF_subsidy_update";
MPRINT(FILE_INFO):   proc contents data=Sec8MF_subsidy_update;
MPRINT(FILE_INFO):   run;

NOTE: PROCEDURE CONTENTS used (Total process time):
      real time           0.05 seconds
      cpu time            0.01 seconds
      
NOTE: The PROCEDURE CONTENTS printed pages 3-4.

MPRINT(FILE_INFO):   proc print data=Sec8MF_subsidy_update (obs=10);
MPRINT(FILE_INFO):   title3 "Printing first 10 obs.";
MPRINT(FILE_INFO):   run;

NOTE: There were 10 observations read from the data set WORK.SEC8MF_SUBSIDY_UPDATE.
NOTE: The PROCEDURE PRINT printed page 5.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
15 The SAS System                                                                              12:23 Saturday, July 25, 2015

      

MPRINT(FILE_INFO):   title3;
MPRINT(FILE_INFO):   options nolabel;
MPRINT(FILE_INFO):   proc means data=Sec8MF_subsidy_update n sum mean stddev min max;
MPRINT(FILE_INFO):   run;

NOTE: Multiple concurrent threads will be used to summarize data.
NOTE: There were 110 observations read from the data set WORK.SEC8MF_SUBSIDY_UPDATE.
NOTE: The PROCEDURE MEANS printed page 6.
NOTE: PROCEDURE MEANS used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds
      

MPRINT(FILE_INFO):   options label;
MPRINT(FILE_INFO):   proc freq data=Sec8MF_subsidy_update;
MPRINT(FILE_INFO):   tables Program Subsidy_Info_Source_Date / missing;
MPRINT(FILE_INFO):   run;

NOTE: There were 110 observations read from the data set WORK.SEC8MF_SUBSIDY_UPDATE.
NOTE: The PROCEDURE FREQ printed page 7.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.12 seconds
      cpu time            0.04 seconds
      

MPRINT(FILE_INFO):   title2;
288        
289        title2 'File = Sec8MF_subsidy_update';
290        
291        %Dup_check(
292          data=Sec8MF_subsidy_update,
293          by=Subsidy_Info_Source_ID,
294          id=contract_number,
295          out=_dup_check,
296          listdups=Y,
297          count=dup_check_count,
298          quiet=N,
299          debug=N
300        )
MPRINT(DUP_CHECK):   options nomprint;
NOTE: SAS threaded sort was used.
NOTE: Table WORK._DUP_CHECK created, with 0 rows and 3 columns.

NOTE: PROCEDURE SQL used (Total process time):
16 The SAS System                                                                              12:23 Saturday, July 25, 2015

      real time           0.09 seconds
      cpu time            0.09 seconds
      

NOTE: PROCEDURE SQL used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

NOTE: [Dup_check] 0 duplicate observations found in data set SEC8MF_SUBSIDY_UPDATE
NOTE: [Dup_check] for BY variables SUBSIDY_INFO_SOURCE_ID.

NOTE: No observations in data set WORK._DUP_CHECK.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      


NOTE: Deleting WORK._DUP_CHECK (memtype=DATA).
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

301        
302        title2 'File = PresCat.Subsidy (where=(Subsidy_Info_Source=&Subsidy_Info_Source))';
303        
304        %Dup_check(
305          data=PresCat.Subsidy (where=(Subsidy_Info_Source=&Subsidy_Info_Source)),
306          by=Subsidy_Info_Source_ID,
307          id=nlihc_id contract_number Subsidy_Info_Source portfolio,
308          out=_dup_check,
309          listdups=Y,
310          count=dup_check_count,
311          quiet=N,
312          debug=N
313        )
MPRINT(DUP_CHECK):   options nomprint;
NOTE: SAS threaded sort was used.
NOTE: Table WORK._DUP_CHECK created, with 0 rows and 6 columns.

NOTE: PROCEDURE SQL used (Total process time):
      real time           0.09 seconds
      cpu time            0.06 seconds
      
17 The SAS System                                                                              12:23 Saturday, July 25, 2015


NOTE: PROCEDURE SQL used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

NOTE: [Dup_check] 0 duplicate observations found in data set PRESCAT.SUBSIDY (WHERE=(SUBSIDY_INFO_SOURCE="HUD/MFA"))
NOTE: [Dup_check] for BY variables SUBSIDY_INFO_SOURCE_ID.

NOTE: No observations in data set WORK._DUP_CHECK.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      


NOTE: Deleting WORK._DUP_CHECK (memtype=DATA).
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

314        
315        title2;
316        
317        ***** Update subsidy file *****;
318        
319        ** Prepare Catalog file for update **;
320        
321        data Subsidy_mfa Subsidy_other;
322        
323          set PresCat.Subsidy;
324        
325          if Subsidy_Info_Source=&Subsidy_Info_Source then output Subsidy_mfa;
326          else output Subsidy_other;
327        
328        run;

NOTE: There were 707 observations read from the data set PRESCAT.SUBSIDY.
NOTE: The data set WORK.SUBSIDY_MFA has 121 observations and 17 variables.
NOTE: Compressing data set WORK.SUBSIDY_MFA decreased size by 0.00 percent. 
      Compressed is 3 pages; un-compressed would require 3 pages.
NOTE: The data set WORK.SUBSIDY_OTHER has 586 observations and 17 variables.
NOTE: Compressing data set WORK.SUBSIDY_OTHER decreased size by 46.15 percent. 
      Compressed is 7 pages; un-compressed would require 13 pages.
NOTE: DATA statement used (Total process time):
18 The SAS System                                                                              12:23 Saturday, July 25, 2015

      real time           0.01 seconds
      cpu time            0.01 seconds
      

329        
330        proc sort data=Subsidy_mfa;
331          by Subsidy_Info_Source_ID;
332        run;

NOTE: There were 121 observations read from the data set WORK.SUBSIDY_MFA.
NOTE: SAS sort was used.
NOTE: The data set WORK.SUBSIDY_MFA has 121 observations and 17 variables.
NOTE: Compressing data set WORK.SUBSIDY_MFA decreased size by 0.00 percent. 
      Compressed is 3 pages; un-compressed would require 3 pages.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

333        
334        ** Perform update **;
335        
336        data Subsidy_mfa_update_a;
337        
338          update
339            Subsidy_mfa
340            Sec8MF_subsidy_update (keep=&Subsidy_update_vars &Subsidy_tech_vars &Subsidy_missing_info_vars);
341          by Subsidy_Info_Source_ID;
342        
343          if missing( Subsidy_id ) then Subsidy_id = &NO_SUBSIDY_ID;
344        
345        run;

NOTE: Format $S8PGMNM was not found or could not be loaded.
NOTE: There were 121 observations read from the data set WORK.SUBSIDY_MFA.
NOTE: There were 110 observations read from the data set WORK.SEC8MF_SUBSIDY_UPDATE.
NOTE: The data set WORK.SUBSIDY_MFA_UPDATE_A has 121 observations and 20 variables.
NOTE: Compressing data set WORK.SUBSIDY_MFA_UPDATE_A decreased size by 25.00 percent. 
      Compressed is 3 pages; un-compressed would require 4 pages.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

346        
347        proc sort data=Subsidy_mfa_update_a;
19 The SAS System                                                                              12:23 Saturday, July 25, 2015

348          by Nlihc_id Subsidy_id poa_start poa_end;
349        run;

NOTE: There were 121 observations read from the data set WORK.SUBSIDY_MFA_UPDATE_A.
NOTE: SAS sort was used.
NOTE: The data set WORK.SUBSIDY_MFA_UPDATE_A has 121 observations and 20 variables.
NOTE: Compressing data set WORK.SUBSIDY_MFA_UPDATE_A decreased size by 25.00 percent. 
      Compressed is 3 pages; un-compressed would require 4 pages.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

350        
351        ** Add subsidy ID to new subsidy records **;
352        
353        data Subsidy_mfa_update_b;
354        
355          set Subsidy_mfa_update_a (in=in1) Subsidy_other;
356          by nlihc_id Subsidy_id;
357        
358          retain Subsidy_id_ret;
359        
360          if first.nlihc_id then Subsidy_id_ret = 0;
361        
362          if Subsidy_id = &NO_SUBSIDY_ID then Subsidy_id = Subsidy_id_ret + 1;
363        
364          Subsidy_id_ret = Subsidy_id;
365        
366          if in1 then output;
367        
368          drop Subsidy_id_ret &Subsidy_missing_info_vars;
369        
370        run;

NOTE: Format $S8PGMNM was not found or could not be loaded.
NOTE: There were 121 observations read from the data set WORK.SUBSIDY_MFA_UPDATE_A.
NOTE: There were 586 observations read from the data set WORK.SUBSIDY_OTHER.
NOTE: The data set WORK.SUBSIDY_MFA_UPDATE_B has 121 observations and 16 variables.
NOTE: Compressing data set WORK.SUBSIDY_MFA_UPDATE_B decreased size by 0.00 percent. 
      Compressed is 3 pages; un-compressed would require 3 pages.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

20 The SAS System                                                                              12:23 Saturday, July 25, 2015

371        
372        /*
373        proc compare base=Subsidy_mfa_update_a compare=Subsidy_mfa_update_b maxprint=(40,32000);
374        run;
375        */
376        
377        
378        ***** Summarize update changes *****;
379        
380        %file_info( data=Subsidy_mfa_update_b, freqvars=Subsidy_Info_Source_Date Update_Dtm )
MPRINT(FILE_INFO):   title2 "File = Subsidy_mfa_update_b";
MPRINT(FILE_INFO):   proc contents data=Subsidy_mfa_update_b;
MPRINT(FILE_INFO):   run;

NOTE: PROCEDURE CONTENTS used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      
NOTE: The PROCEDURE CONTENTS printed page 8.

MPRINT(FILE_INFO):   proc print data=Subsidy_mfa_update_b (obs=10);
MPRINT(FILE_INFO):   title3 "Printing first 10 obs.";
MPRINT(FILE_INFO):   run;

NOTE: There were 10 observations read from the data set WORK.SUBSIDY_MFA_UPDATE_B.
NOTE: The PROCEDURE PRINT printed page 9.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(FILE_INFO):   title3;
MPRINT(FILE_INFO):   options nolabel;
MPRINT(FILE_INFO):   proc means data=Subsidy_mfa_update_b n sum mean stddev min max;
MPRINT(FILE_INFO):   run;

NOTE: Multiple concurrent threads will be used to summarize data.
NOTE: There were 121 observations read from the data set WORK.SUBSIDY_MFA_UPDATE_B.
NOTE: The PROCEDURE MEANS printed page 10.
NOTE: PROCEDURE MEANS used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

MPRINT(FILE_INFO):   options label;
MPRINT(FILE_INFO):   proc freq data=Subsidy_mfa_update_b;
21 The SAS System                                                                              12:23 Saturday, July 25, 2015

MPRINT(FILE_INFO):   tables Subsidy_Info_Source_Date Update_Dtm / missing;
MPRINT(FILE_INFO):   run;

NOTE: There were 121 observations read from the data set WORK.SUBSIDY_MFA_UPDATE_B.
NOTE: The PROCEDURE FREQ printed page 11.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

MPRINT(FILE_INFO):   title2;
381        
382        proc sort data=Subsidy_mfa;
383          by nlihc_id Subsidy_ID;
384        

NOTE: There were 121 observations read from the data set WORK.SUBSIDY_MFA.
NOTE: SAS sort was used.
NOTE: The data set WORK.SUBSIDY_MFA has 121 observations and 17 variables.
NOTE: Compressing data set WORK.SUBSIDY_MFA decreased size by 0.00 percent. 
      Compressed is 3 pages; un-compressed would require 3 pages.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

385        proc sort data=Subsidy_mfa_update_b;
386          by nlihc_id Subsidy_ID;
387        

NOTE: There were 121 observations read from the data set WORK.SUBSIDY_MFA_UPDATE_B.
NOTE: SAS sort was used.
NOTE: The data set WORK.SUBSIDY_MFA_UPDATE_B has 121 observations and 16 variables.
NOTE: Compressing data set WORK.SUBSIDY_MFA_UPDATE_B decreased size by 0.00 percent. 
      Compressed is 3 pages; un-compressed would require 3 pages.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

388        proc compare base=Subsidy_mfa compare=Subsidy_mfa_update_b
389            listall /*outnoequal*/ outbase outcomp outdif maxprint=(40,32000)
390            out=Update_subsidy_result (rename=(_type_=comp_type));
391          id nlihc_id Subsidy_ID &Subsidy_tech_vars;
392          var &Subsidy_update_vars /*Units_Assist POA_start POA_end Compl_end
393            rent_to_FMR_description Subsidy_Active
22 The SAS System                                                                              12:23 Saturday, July 25, 2015

394            Program*/;
395        run;

NOTE: There were 121 observations read from the data set WORK.SUBSIDY_MFA.
NOTE: There were 121 observations read from the data set WORK.SUBSIDY_MFA_UPDATE_B.
NOTE: The data set WORK.UPDATE_SUBSIDY_RESULT has 253 observations and 15 variables.
NOTE: Compressing data set WORK.UPDATE_SUBSIDY_RESULT decreased size by 33.33 percent. 
      Compressed is 4 pages; un-compressed would require 6 pages.
NOTE: The PROCEDURE COMPARE printed pages 12-35.
NOTE: PROCEDURE COMPARE used (Total process time):
      real time           0.04 seconds
      cpu time            0.03 seconds
      

396        
397        proc print data=Update_subsidy_result (obs=20) noobs;
398          id nlihc_id Subsidy_ID;
399          title2 'File = Update_subsidy_result';
400        run;

NOTE: There were 20 observations read from the data set WORK.UPDATE_SUBSIDY_RESULT.
NOTE: The PROCEDURE PRINT printed pages 36-37.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

401        
402        title2;
403        
404        ** Formatted compare output **;
405        
406        %Super_transpose(
407          data=Update_subsidy_result,
408          out=Update_subsidy_result_tr,
409          var=&Subsidy_update_vars /*Units_Assist POA_start POA_end Compl_end
410            rent_to_FMR_description Subsidy_Active
411            Program*/,
412          id=comp_type,
413          by=nlihc_id Subsidy_ID &Subsidy_tech_vars /*Subsidy_Info_Source Subsidy_Info_Source_Date Subsidy_Info_Source_ID
413      !  Update_Dtm*/,
414          mprint=N
415        )
NOTE: [Super_transpose] Macro starting.
NOTE: [Push_option] System option MPRINT saved.
MPRINT(SUPER_TRANSPOSE):   options nomprint;
23 The SAS System                                                                              12:23 Saturday, July 25, 2015


NOTE: Multiple concurrent threads will be used to summarize data.
NOTE: There were 253 observations read from the data set WORK.UPDATE_SUBSIDY_RESULT.
NOTE: The data set WORK._ST_IDVALS has 3 observations and 1 variables.
NOTE: PROCEDURE SUMMARY used (Total process time):
      real time           0.04 seconds
      cpu time            0.03 seconds
      


NOTE: There were 3 observations read from the data set WORK._ST_IDVALS.
NOTE: DATA statement used (Total process time):
      real time           0.02 seconds
      cpu time            0.01 seconds
      

idvals=  BASE COMPARE DIF

NOTE: There were 1 observations read from the data set WORK.UPDATE_SUBSIDY_RESULT.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      


NOTE: There were 253 observations read from the data set WORK.UPDATE_SUBSIDY_RESULT.
NOTE: The data set WORK._ST_UNITS_ASSIST has 231 observations and 9 variables.
NOTE: Compressing data set WORK._ST_UNITS_ASSIST decreased size by 20.00 percent. 
      Compressed is 4 pages; un-compressed would require 5 pages.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      


NOTE: There were 1 observations read from the data set WORK.UPDATE_SUBSIDY_RESULT.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      


NOTE: There were 253 observations read from the data set WORK.UPDATE_SUBSIDY_RESULT.
NOTE: The data set WORK._ST_POA_START has 231 observations and 9 variables.
NOTE: Compressing data set WORK._ST_POA_START decreased size by 20.00 percent. 
      Compressed is 4 pages; un-compressed would require 5 pages.
24 The SAS System                                                                              12:23 Saturday, July 25, 2015

NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.03 seconds
      cpu time            0.01 seconds
      


NOTE: There were 1 observations read from the data set WORK.UPDATE_SUBSIDY_RESULT.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      


NOTE: There were 253 observations read from the data set WORK.UPDATE_SUBSIDY_RESULT.
NOTE: The data set WORK._ST_POA_END has 231 observations and 9 variables.
NOTE: Compressing data set WORK._ST_POA_END decreased size by 20.00 percent. 
      Compressed is 4 pages; un-compressed would require 5 pages.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      


NOTE: There were 1 observations read from the data set WORK.UPDATE_SUBSIDY_RESULT.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      


NOTE: There were 253 observations read from the data set WORK.UPDATE_SUBSIDY_RESULT.
NOTE: The data set WORK._ST_COMPL_END has 231 observations and 9 variables.
NOTE: Compressing data set WORK._ST_COMPL_END decreased size by 20.00 percent. 
      Compressed is 4 pages; un-compressed would require 5 pages.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      


NOTE: There were 1 observations read from the data set WORK.UPDATE_SUBSIDY_RESULT.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

25 The SAS System                                                                              12:23 Saturday, July 25, 2015


NOTE: There were 253 observations read from the data set WORK.UPDATE_SUBSIDY_RESULT.
NOTE: The data set WORK._ST_RENT_TO_FMR_DESCRIPTION has 231 observations and 9 variables.
NOTE: Compressing data set WORK._ST_RENT_TO_FMR_DESCRIPTION decreased size by 40.00 percent. 
      Compressed is 3 pages; un-compressed would require 5 pages.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.02 seconds
      cpu time            0.03 seconds
      


NOTE: There were 1 observations read from the data set WORK.UPDATE_SUBSIDY_RESULT.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      


NOTE: There were 253 observations read from the data set WORK.UPDATE_SUBSIDY_RESULT.
NOTE: The data set WORK._ST_SUBSIDY_ACTIVE has 231 observations and 9 variables.
NOTE: Compressing data set WORK._ST_SUBSIDY_ACTIVE decreased size by 0.00 percent. 
      Compressed is 4 pages; un-compressed would require 4 pages.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      


NOTE: There were 1 observations read from the data set WORK.UPDATE_SUBSIDY_RESULT.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      


NOTE: There were 253 observations read from the data set WORK.UPDATE_SUBSIDY_RESULT.
NOTE: The data set WORK._ST_PROGRAM has 231 observations and 9 variables.
NOTE: Compressing data set WORK._ST_PROGRAM decreased size by 40.00 percent. 
      Compressed is 3 pages; un-compressed would require 5 pages.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      


NOTE: There were 231 observations read from the data set WORK._ST_UNITS_ASSIST.
26 The SAS System                                                                              12:23 Saturday, July 25, 2015

NOTE: There were 231 observations read from the data set WORK._ST_POA_START.
NOTE: There were 231 observations read from the data set WORK._ST_POA_END.
NOTE: There were 231 observations read from the data set WORK._ST_COMPL_END.
NOTE: There were 231 observations read from the data set WORK._ST_RENT_TO_FMR_DESCRIPTION.
NOTE: There were 231 observations read from the data set WORK._ST_SUBSIDY_ACTIVE.
NOTE: There were 231 observations read from the data set WORK._ST_PROGRAM.
NOTE: The data set WORK.UPDATE_SUBSIDY_RESULT_TR has 231 observations and 27 variables.
NOTE: Compressing data set WORK.UPDATE_SUBSIDY_RESULT_TR decreased size by 42.86 percent. 
      Compressed is 4 pages; un-compressed would require 7 pages.
NOTE: DATA statement used (Total process time):
      real time           0.02 seconds
      cpu time            0.03 seconds
      

NOTE: [Pop_option] System option MPRINT restored.
NOTE: [Super_transpose] Macro exiting.
416        
417        %file_info( data=Update_subsidy_result_tr, printobs=10, stats= )
MPRINT(FILE_INFO):   title2 "File = Update_subsidy_result_tr";
MPRINT(FILE_INFO):   proc contents data=Update_subsidy_result_tr;
MPRINT(FILE_INFO):   run;

NOTE: PROCEDURE CONTENTS used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      
NOTE: The PROCEDURE CONTENTS printed pages 38-39.

MPRINT(FILE_INFO):   proc print data=Update_subsidy_result_tr (obs=10);
MPRINT(FILE_INFO):   title3 "Printing first 10 obs.";
MPRINT(FILE_INFO):   run;

NOTE: There were 10 observations read from the data set WORK.UPDATE_SUBSIDY_RESULT_TR.
NOTE: The PROCEDURE PRINT printed pages 40-41.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(FILE_INFO):   title3;
MPRINT(FILE_INFO):   title2;
418        
419        
420        ******** Apply exception file ************;
421        
422        data Subsidy_mfa_except;
27 The SAS System                                                                              12:23 Saturday, July 25, 2015

423        
424          update Subsidy_mfa_update_b (in=in1) Subsidy_except_test_norm /*(drop=Except_:)*/;
425          by nlihc_id Subsidy_ID;
426        
427          if in1;
428        
429        run;

NOTE: There were 121 observations read from the data set WORK.SUBSIDY_MFA_UPDATE_B.
NOTE: There were 5 observations read from the data set WORK.SUBSIDY_EXCEPT_TEST_NORM.
NOTE: The data set WORK.SUBSIDY_MFA_EXCEPT has 121 observations and 17 variables.
NOTE: Compressing data set WORK.SUBSIDY_MFA_EXCEPT decreased size by 0.00 percent. 
      Compressed is 3 pages; un-compressed would require 3 pages.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

430        
431        %File_info( data=Subsidy_mfa_except, printobs=10, stats= )
MPRINT(FILE_INFO):   title2 "File = Subsidy_mfa_except";
MPRINT(FILE_INFO):   proc contents data=Subsidy_mfa_except;
MPRINT(FILE_INFO):   run;

NOTE: PROCEDURE CONTENTS used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      
NOTE: The PROCEDURE CONTENTS printed page 42.

MPRINT(FILE_INFO):   proc print data=Subsidy_mfa_except (obs=10);
MPRINT(FILE_INFO):   title3 "Printing first 10 obs.";
MPRINT(FILE_INFO):   run;

NOTE: There were 10 observations read from the data set WORK.SUBSIDY_MFA_EXCEPT.
NOTE: The PROCEDURE PRINT printed page 43.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(FILE_INFO):   title3;
MPRINT(FILE_INFO):   title2;
432        
433        /*
434        proc print data=Subsidy_mfa_except;
28 The SAS System                                                                              12:23 Saturday, July 25, 2015

435          where nlihc_id in ( 'NL000001' );
436          id nlihc_id subsidy_id;
437          title2 "File = Subsidy_mfa_except";
438        run;
439        title2;
440        */
441        
442        /*
443        proc compare base=Subsidy_mfa_update_b compare=Subsidy_mfa_except
444            listall outnoequal outbase outcomp outdif maxprint=(40,32000)
445            out=Update_except (rename=(_type_=comp_type));
446          id nlihc_id Subsidy_ID;
447          var Units_Assist POA_start POA_end Compl_end
448            rent_to_FMR_description Subsidy_Active
449            Program;
450        run;
451        */
452        
453        data Subsidy_except_test_b;
454        
455          set Subsidy_except_test_norm;
456        
457          retain comp_type 'EXCEPT';
458        
459        run;

NOTE: There were 5 observations read from the data set WORK.SUBSIDY_EXCEPT_TEST_NORM.
NOTE: The data set WORK.SUBSIDY_EXCEPT_TEST_B has 5 observations and 13 variables.
NOTE: Compressing data set WORK.SUBSIDY_EXCEPT_TEST_B increased size by 100.00 percent. 
      Compressed is 2 pages; un-compressed would require 1 pages.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

460        
461        proc print data=Subsidy_except_test_b (obs=10) noobs;
462          id nlihc_id Subsidy_ID;
463          title2 'File = Subsidy_except_test_b';
464        run;

NOTE: There were 5 observations read from the data set WORK.SUBSIDY_EXCEPT_TEST_B.
NOTE: The PROCEDURE PRINT printed page 44.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
29 The SAS System                                                                              12:23 Saturday, July 25, 2015

      

465        
466        title2;
467        
468        ** Formatted compare output **;
469        
470        %Super_transpose(
471          data=Subsidy_except_test_b,
472          out=Update_except_tr,
473          var=Units_Assist POA_start POA_end Compl_end
474            rent_to_FMR_description Subsidy_Active
475            Program,
476          id=comp_type,
477          by=nlihc_id Subsidy_ID /*Subsidy_Info_Source_ID*/,
478          mprint=N
479        )
NOTE: [Super_transpose] Macro starting.
NOTE: [Push_option] System option MPRINT saved.
MPRINT(SUPER_TRANSPOSE):   options nomprint;

NOTE: Multiple concurrent threads will be used to summarize data.
NOTE: There were 5 observations read from the data set WORK.SUBSIDY_EXCEPT_TEST_B.
NOTE: The data set WORK._ST_IDVALS has 1 observations and 1 variables.
NOTE: PROCEDURE SUMMARY used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      


NOTE: There were 1 observations read from the data set WORK._ST_IDVALS.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

idvals=  EXCEPT

NOTE: There were 1 observations read from the data set WORK.SUBSIDY_EXCEPT_TEST_B.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      


NOTE: There were 5 observations read from the data set WORK.SUBSIDY_EXCEPT_TEST_B.
30 The SAS System                                                                              12:23 Saturday, July 25, 2015

NOTE: The data set WORK._ST_UNITS_ASSIST has 5 observations and 3 variables.
NOTE: Compressing data set WORK._ST_UNITS_ASSIST increased size by 100.00 percent. 
      Compressed is 2 pages; un-compressed would require 1 pages.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      


NOTE: There were 1 observations read from the data set WORK.SUBSIDY_EXCEPT_TEST_B.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      


NOTE: There were 5 observations read from the data set WORK.SUBSIDY_EXCEPT_TEST_B.
NOTE: The data set WORK._ST_POA_START has 5 observations and 3 variables.
NOTE: Compressing data set WORK._ST_POA_START increased size by 100.00 percent. 
      Compressed is 2 pages; un-compressed would require 1 pages.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      


NOTE: There were 1 observations read from the data set WORK.SUBSIDY_EXCEPT_TEST_B.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      


NOTE: There were 5 observations read from the data set WORK.SUBSIDY_EXCEPT_TEST_B.
NOTE: The data set WORK._ST_POA_END has 5 observations and 3 variables.
NOTE: Compressing data set WORK._ST_POA_END increased size by 100.00 percent. 
      Compressed is 2 pages; un-compressed would require 1 pages.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      


NOTE: There were 1 observations read from the data set WORK.SUBSIDY_EXCEPT_TEST_B.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
31 The SAS System                                                                              12:23 Saturday, July 25, 2015

      cpu time            0.00 seconds
      


NOTE: There were 5 observations read from the data set WORK.SUBSIDY_EXCEPT_TEST_B.
NOTE: The data set WORK._ST_COMPL_END has 5 observations and 3 variables.
NOTE: Compressing data set WORK._ST_COMPL_END increased size by 100.00 percent. 
      Compressed is 2 pages; un-compressed would require 1 pages.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      


NOTE: There were 1 observations read from the data set WORK.SUBSIDY_EXCEPT_TEST_B.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      


NOTE: There were 5 observations read from the data set WORK.SUBSIDY_EXCEPT_TEST_B.
NOTE: The data set WORK._ST_RENT_TO_FMR_DESCRIPTION has 5 observations and 3 variables.
NOTE: Compressing data set WORK._ST_RENT_TO_FMR_DESCRIPTION increased size by 100.00 percent. 
      Compressed is 2 pages; un-compressed would require 1 pages.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      


NOTE: There were 1 observations read from the data set WORK.SUBSIDY_EXCEPT_TEST_B.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      


NOTE: There were 5 observations read from the data set WORK.SUBSIDY_EXCEPT_TEST_B.
NOTE: The data set WORK._ST_SUBSIDY_ACTIVE has 5 observations and 3 variables.
NOTE: Compressing data set WORK._ST_SUBSIDY_ACTIVE increased size by 100.00 percent. 
      Compressed is 2 pages; un-compressed would require 1 pages.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      
32 The SAS System                                                                              12:23 Saturday, July 25, 2015



NOTE: There were 1 observations read from the data set WORK.SUBSIDY_EXCEPT_TEST_B.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      


NOTE: There were 5 observations read from the data set WORK.SUBSIDY_EXCEPT_TEST_B.
NOTE: The data set WORK._ST_PROGRAM has 5 observations and 3 variables.
NOTE: Compressing data set WORK._ST_PROGRAM increased size by 100.00 percent. 
      Compressed is 2 pages; un-compressed would require 1 pages.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      


NOTE: There were 5 observations read from the data set WORK._ST_UNITS_ASSIST.
NOTE: There were 5 observations read from the data set WORK._ST_POA_START.
NOTE: There were 5 observations read from the data set WORK._ST_POA_END.
NOTE: There were 5 observations read from the data set WORK._ST_COMPL_END.
NOTE: There were 5 observations read from the data set WORK._ST_RENT_TO_FMR_DESCRIPTION.
NOTE: There were 5 observations read from the data set WORK._ST_SUBSIDY_ACTIVE.
NOTE: There were 5 observations read from the data set WORK._ST_PROGRAM.
NOTE: The data set WORK.UPDATE_EXCEPT_TR has 5 observations and 9 variables.
NOTE: Compressing data set WORK.UPDATE_EXCEPT_TR increased size by 100.00 percent. 
      Compressed is 2 pages; un-compressed would require 1 pages.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

NOTE: [Pop_option] System option MPRINT restored.
NOTE: [Super_transpose] Macro exiting.
480        
481        %file_info( data=Update_except_tr, printobs=10, stats= )
MPRINT(FILE_INFO):   title2 "File = Update_except_tr";
MPRINT(FILE_INFO):   proc contents data=Update_except_tr;
MPRINT(FILE_INFO):   run;

NOTE: PROCEDURE CONTENTS used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      
33 The SAS System                                                                              12:23 Saturday, July 25, 2015

NOTE: The PROCEDURE CONTENTS printed page 45.

MPRINT(FILE_INFO):   proc print data=Update_except_tr (obs=10);
MPRINT(FILE_INFO):   title3 "Printing first 10 obs.";
MPRINT(FILE_INFO):   run;

NOTE: There were 5 observations read from the data set WORK.UPDATE_EXCEPT_TR.
NOTE: The PROCEDURE PRINT printed page 46.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(FILE_INFO):   title3;
MPRINT(FILE_INFO):   title2;
482        
483        ** Combine update and exception changes **;
484        
485        data Update_subsidy_result_except_tr;
486        
487          merge Update_subsidy_result_tr Update_except_tr;
488          by nlihc_id subsidy_id;
489        
490          ** Convert DIF for char vars to missing if no differences **;
491        
492          array charvars{*} rent_to_FMR_description_DIF Program_DIF;
493        
494          do i = 1 to dim( charvars );
495            charvars{i} = compress( charvars{i}, '.' );
496          end;
497        
498          ** Add category codes for report **;
499        
500          length Category_code $ 1;
501        
502          Category_code = put( nlihc_id, $nlihcid2cat. );
503        
504          format Category_code $categry.;
505        
506        run;

NOTE: There were 231 observations read from the data set WORK.UPDATE_SUBSIDY_RESULT_TR.
NOTE: There were 5 observations read from the data set WORK.UPDATE_EXCEPT_TR.
NOTE: The data set WORK.UPDATE_SUBSIDY_RESULT_EXCEPT_TR has 231 observations and 36 variables.
NOTE: Compressing data set WORK.UPDATE_SUBSIDY_RESULT_EXCEPT_TR decreased size by 44.44 percent. 
      Compressed is 5 pages; un-compressed would require 9 pages.
34 The SAS System                                                                              12:23 Saturday, July 25, 2015

NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

507        
508        proc print data=Update_subsidy_result_except_tr;
509          where nlihc_id in ( 'NL000001' );
510          id nlihc_id subsidy_id;
511          title2 "File = Update_subsidy_result_except_tr";
512        run;

NOTE: There were 4 observations read from the data set WORK.UPDATE_SUBSIDY_RESULT_EXCEPT_TR.
      WHERE nlihc_id='NL000001';
NOTE: The PROCEDURE PRINT printed page 47.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

513        title2;
514        
515        
516        ** Recombine with other subsidy data **;
517        
518        data /**TEMP LIB**/PRESCAT.Subsidy_Update_&Update_file;
519        
520          set Subsidy_mfa_except Subsidy_other;
521          by nlihc_id Subsidy_id;
522        
523          where not( missing( nlihc_id ) );
524        
525          ** Subsidy portfolio **;
526        
527          length Portfolio $ 16;
528        
529          Portfolio = put( Program, $progtoportfolio. );
530        
531          if missing( Portfolio ) then do;
532            %warn_put( msg="Missing subsidy portfolio: " _n_= nlihc_id= subsidy_id= Program= )
MPRINT(WARN_PUT):   put "WARN" "ING:" " " "Missing subsidy portfolio: " _n_= nlihc_id= subsidy_id= Program=;
533          end;
534        
535        run;

NOTE: There were 121 observations read from the data set WORK.SUBSIDY_MFA_EXCEPT.
35 The SAS System                                                                              12:23 Saturday, July 25, 2015

      WHERE not MISSING(nlihc_id);
NOTE: There were 586 observations read from the data set WORK.SUBSIDY_OTHER.
      WHERE not MISSING(nlihc_id);
NOTE: The data set PRESCAT.SUBSIDY_UPDATE_SEC8MF_2014_11 has 707 observations and 17 variables.
NOTE: Compressing data set PRESCAT.SUBSIDY_UPDATE_SEC8MF_2014_11 decreased size by 46.67 percent. 
      Compressed is 8 pages; un-compressed would require 15 pages.
NOTE: DATA statement used (Total process time):
      real time           0.10 seconds
      cpu time            0.01 seconds
      

536        
537        %File_info( data=/**TEMP LIB**/PRESCAT.Subsidy_Update_&Update_file )
MPRINT(FILE_INFO):   title2 "File = PRESCAT.Subsidy_Update_Sec8mf_2014_11";
MPRINT(FILE_INFO):   proc contents data=PRESCAT.Subsidy_Update_Sec8mf_2014_11;
MPRINT(FILE_INFO):   run;

NOTE: PROCEDURE CONTENTS used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      
NOTE: The PROCEDURE CONTENTS printed page 48.

MPRINT(FILE_INFO):   proc print data=PRESCAT.Subsidy_Update_Sec8mf_2014_11 (obs=10);
MPRINT(FILE_INFO):   title3 "Printing first 10 obs.";
MPRINT(FILE_INFO):   run;

NOTE: There were 10 observations read from the data set PRESCAT.SUBSIDY_UPDATE_SEC8MF_2014_11.
NOTE: The PROCEDURE PRINT printed pages 49-51.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

MPRINT(FILE_INFO):   title3;
MPRINT(FILE_INFO):   options nolabel;
MPRINT(FILE_INFO):   proc means data=PRESCAT.Subsidy_Update_Sec8mf_2014_11 n sum mean stddev min max;
MPRINT(FILE_INFO):   run;

NOTE: Multiple concurrent threads will be used to summarize data.
NOTE: There were 707 observations read from the data set PRESCAT.SUBSIDY_UPDATE_SEC8MF_2014_11.
NOTE: The PROCEDURE MEANS printed page 52.
NOTE: PROCEDURE MEANS used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds
      
36 The SAS System                                                                              12:23 Saturday, July 25, 2015


MPRINT(FILE_INFO):   options label;
MPRINT(FILE_INFO):   title2;
538        
539        proc print data=/**TEMP LIB**/PRESCAT.Subsidy_Update_&Update_file;
540          where nlihc_id in ( "NL001030", "NL001031", "NL001032", "NL001033" );
541          by nlihc_id;
542          id subsidy_id;
543          title2 "File = Subsidy_Update_&Update_file";
544        run;

NOTE: There were 1 observations read from the data set PRESCAT.SUBSIDY_UPDATE_SEC8MF_2014_11.
      WHERE nlihc_id in ('NL001030', 'NL001031', 'NL001032', 'NL001033');
NOTE: The PROCEDURE PRINT printed page 53.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

545        title2;
546        
547        proc compare base=PresCat.Subsidy compare=/**TEMP LIB**/PRESCAT.Subsidy_Update_&Update_file maxprint=(40,32000)
547      ! listall;
548          id nlihc_id subsidy_id;
549          /*
550          var Units_Assist POA_start POA_end
551            rent_to_FMR_description Subsidy_Active
552            Program;
553          */
554        run;

NOTE: There were 707 observations read from the data set PRESCAT.SUBSIDY.
NOTE: There were 707 observations read from the data set PRESCAT.SUBSIDY_UPDATE_SEC8MF_2014_11.
NOTE: At least one W.D format was too small for the number to be printed. The decimal may be shifted by the "BEST" format.
NOTE: The PROCEDURE COMPARE printed pages 54-63.
NOTE: PROCEDURE COMPARE used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

555        
556        
557        ***** Write final file *****;
558        
559        ** Archive past Catalog datasets before updating **;
560        
37 The SAS System                                                                              12:23 Saturday, July 25, 2015

561        
562        ***options mprint symbolgen mlogic;
563        
564        /*** SKIP FOR NOW ***%Archive_catalog_data( data=Project Subsidy Update_history, zip_pre=Update_&Update_file,
564      ! zip_suf= )****/
565        
566        ***options mprint nosymbolgen nomlogic;
567        
568        /* proc copy */
569        
570        
571        ***** Add record to Update_history  *****;
572        
573        data Update_history_rec;
574        
575          set Sec8MF_subsidy_update (obs=1 keep=Subsidy_Info_Source Subsidy_Info_Source_Date Update_Dtm);
576        
577          rename
578            Subsidy_Info_Source=Info_Source
579            Subsidy_Info_Source_Date=Info_Source_Date;
580        
581        run;

NOTE: There were 1 observations read from the data set WORK.SEC8MF_SUBSIDY_UPDATE.
NOTE: The data set WORK.UPDATE_HISTORY_REC has 1 observations and 3 variables.
NOTE: Compressing data set WORK.UPDATE_HISTORY_REC increased size by 100.00 percent. 
      Compressed is 2 pages; un-compressed would require 1 pages.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

582        
583        proc sort data=PresCat.Update_history out=Update_history;
584          by Info_source Info_source_date;
585        

NOTE: Input data set is empty.
NOTE: The data set WORK.UPDATE_HISTORY has 0 observations and 3 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

586        data Update_history_new (label="Preservation Catalog, update history");
587        
38 The SAS System                                                                              12:23 Saturday, July 25, 2015

588          update updatemode=nomissingcheck Update_history Update_history_rec;
589          by Info_source Info_source_date;
590        
591        run;

NOTE: There were 0 observations read from the data set WORK.UPDATE_HISTORY.
NOTE: There were 1 observations read from the data set WORK.UPDATE_HISTORY_REC.
NOTE: The data set WORK.UPDATE_HISTORY_NEW has 1 observations and 3 variables.
NOTE: Compressing data set WORK.UPDATE_HISTORY_NEW increased size by 100.00 percent. 
      Compressed is 2 pages; un-compressed would require 1 pages.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

592        
593        %File_info( data=Update_history_new, stats= )
MPRINT(FILE_INFO):   title2 "File = Update_history_new";
MPRINT(FILE_INFO):   proc contents data=Update_history_new;
MPRINT(FILE_INFO):   run;

NOTE: PROCEDURE CONTENTS used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      
NOTE: The PROCEDURE CONTENTS printed page 64.

MPRINT(FILE_INFO):   proc print data=Update_history_new (obs=10);
MPRINT(FILE_INFO):   title3 "Printing first 10 obs.";
MPRINT(FILE_INFO):   run;

NOTE: There were 1 observations read from the data set WORK.UPDATE_HISTORY_NEW.
NOTE: The PROCEDURE PRINT printed page 65.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(FILE_INFO):   title3;
MPRINT(FILE_INFO):   title2;
594        
595        
596        
597        ** Update Update_subsidy_history data set **;
598        
599        %Update_history_recs( data=update_subsidy_result_except_tr, out=Update_subsidy_history_recs,
39 The SAS System                                                                              12:23 Saturday, July 25, 2015

599      ! Update_vars=&Subsidy_update_vars )
MPRINT(UPDATE_HISTORY_RECS):   ***** Add record to Update_subsidy_history *****;
NOTE: [ListChangeDelim] Processing list=Units_Assist POA_start POA_end Compl_end      rent_to_FMR_description 
Subsidy_Active Program
NOTE: [ListChangeDelim] New list=Units_Assist_DIF POA_start_DIF POA_end_DIF Compl_end_DIF rent_to_FMR_description_DIF 
Subsidy_Active_DIF Program_DIF
NOTE: [ListChangeDelim] Processing list=Units_Assist POA_start POA_end Compl_end      rent_to_FMR_description 
Subsidy_Active Program
NOTE: [ListChangeDelim] New list=Units_Assist_BASE POA_start_BASE POA_end_BASE Compl_end_BASE rent_to_FMR_description_BASE 
Subsidy_Active_BASE Program_BASE
NOTE: [ListChangeDelim] Processing list=Units_Assist POA_start POA_end Compl_end      rent_to_FMR_description 
Subsidy_Active Program
NOTE: [ListChangeDelim] New list=Units_Assist_COMPARE POA_start_COMPARE POA_end_COMPARE Compl_end_COMPARE 
rent_to_FMR_description_COMPARE Subsidy_Active_COMPARE Program_COMPARE
NOTE: [ListChangeDelim] Processing list=Units_Assist POA_start POA_end Compl_end      rent_to_FMR_description 
Subsidy_Active Program
NOTE: [ListChangeDelim] New list=Units_Assist_EXCEPT POA_start_EXCEPT POA_end_EXCEPT Compl_end_EXCEPT 
rent_to_FMR_description_EXCEPT Subsidy_Active_EXCEPT Program_EXCEPT
MPRINT(UPDATE_HISTORY_RECS):   ** Separate lists of numeric and character vars **;
MPRINT(UPDATE_HISTORY_RECS):   proc sql noprint;
MPRINT(UPDATE_HISTORY_RECS):   select distinct name into :Update_vars_dif_char separated by ' ' from dictionary.columns 
where libname="WORK" and memname="UPDATE_SUBSIDY_RESULT_EXCEPT_TR" and type='char' and indexw( "UNITS_ASSIST_DIF 
POA_START_DIF POA_END_DIF COMPL_END_DIF RENT_TO_FMR_DESCRIPTION_DIF SUBSIDY_ACTIVE_DIF PROGRAM_DIF", upcase( name ) ) > 0;
MPRINT(UPDATE_HISTORY_RECS):   select distinct name into :Update_vars_dif_num separated by ' ' from dictionary.columns 
where libname="WORK" and memname="UPDATE_SUBSIDY_RESULT_EXCEPT_TR" and type='num' and indexw( "UNITS_ASSIST_DIF 
POA_START_DIF POA_END_DIF COMPL_END_DIF RENT_TO_FMR_DESCRIPTION_DIF SUBSIDY_ACTIVE_DIF PROGRAM_DIF", upcase( name ) ) > 0;
MPRINT(UPDATE_HISTORY_RECS):   select distinct name into :Update_vars_base_char separated by ' ' from dictionary.columns 
where libname="WORK" and memname="UPDATE_SUBSIDY_RESULT_EXCEPT_TR" and type='char' and indexw( "UNITS_ASSIST_BASE 
POA_START_BASE POA_END_BASE COMPL_END_BASE RENT_TO_FMR_DESCRIPTION_BASE SUBSIDY_ACTIVE_BASE PROGRAM_BASE", upcase( name ) ) 
> 0;
MPRINT(UPDATE_HISTORY_RECS):   select distinct name into :Update_vars_base_num separated by ' ' from dictionary.columns 
where libname="WORK" and memname="UPDATE_SUBSIDY_RESULT_EXCEPT_TR" and type='num' and indexw( "UNITS_ASSIST_BASE 
POA_START_BASE POA_END_BASE COMPL_END_BASE RENT_TO_FMR_DESCRIPTION_BASE SUBSIDY_ACTIVE_BASE PROGRAM_BASE", upcase( name ) ) 
> 0;
MPRINT(UPDATE_HISTORY_RECS):   select distinct name into :Update_vars_compare_char separated by ' ' from dictionary.columns 
where libname="WORK" and memname="UPDATE_SUBSIDY_RESULT_EXCEPT_TR" and type='char' and indexw( "UNITS_ASSIST_COMPARE 
POA_START_COMPARE POA_END_COMPARE COMPL_END_COMPARE RENT_TO_FMR_DESCRIPTION_COMPARE SUBSIDY_ACTIVE_COMPARE 
PROGRAM_COMPARE", upcase( name ) ) > 0;
MPRINT(UPDATE_HISTORY_RECS):   select distinct name into :Update_vars_compare_num separated by ' ' from dictionary.columns 
where libname="WORK" and memname="UPDATE_SUBSIDY_RESULT_EXCEPT_TR" and type='num' and indexw( "UNITS_ASSIST_COMPARE 
POA_START_COMPARE POA_END_COMPARE COMPL_END_COMPARE RENT_TO_FMR_DESCRIPTION_COMPARE SUBSIDY_ACTIVE_COMPARE 
PROGRAM_COMPARE", upcase( name ) ) > 0;
MPRINT(UPDATE_HISTORY_RECS):   select distinct name into :Update_vars_except_char separated by ' ' from dictionary.columns 
where libname="WORK" and memname="UPDATE_SUBSIDY_RESULT_EXCEPT_TR" and type='char' and indexw( "UNITS_ASSIST_EXCEPT 
POA_START_EXCEPT POA_END_EXCEPT COMPL_END_EXCEPT RENT_TO_FMR_DESCRIPTION_EXCEPT SUBSIDY_ACTIVE_EXCEPT PROGRAM_EXCEPT", 
upcase( name ) ) > 0;
40 The SAS System                                                                              12:23 Saturday, July 25, 2015

MPRINT(UPDATE_HISTORY_RECS):   select distinct name into :Update_vars_except_num separated by ' ' from dictionary.columns 
where libname="WORK" and memname="UPDATE_SUBSIDY_RESULT_EXCEPT_TR" and type='num' and indexw( "UNITS_ASSIST_EXCEPT 
POA_START_EXCEPT POA_END_EXCEPT COMPL_END_EXCEPT RENT_TO_FMR_DESCRIPTION_EXCEPT SUBSIDY_ACTIVE_EXCEPT PROGRAM_EXCEPT", 
upcase( name ) ) > 0;
MPRINT(UPDATE_HISTORY_RECS):   quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

UPDATE_HISTORY_RECS DATA update_subsidy_result_except_tr
UPDATE_HISTORY_RECS OUT Update_subsidy_history_recs
UPDATE_HISTORY_RECS UPDATE_VARS Units_Assist POA_start POA_end Compl_end      rent_to_FMR_description Subsidy_Active Program
UPDATE_HISTORY_RECS UPDATE_VARS_DIF Units_Assist_DIF POA_start_DIF POA_end_DIF Compl_end_DIF 
rent_to_FMR_description_DIF Subsidy_Active_DIF Program_DIF
UPDATE_HISTORY_RECS UPDATE_VARS_BASE Units_Assist_BASE POA_start_BASE POA_end_BASE Compl_end_BASE 
rent_to_FMR_description_BASE Subsidy_Active_BASE Program_BASE
UPDATE_HISTORY_RECS UPDATE_VARS_COMPARE Units_Assist_COMPARE POA_start_COMPARE POA_end_COMPARE Compl_end_COMPARE 
rent_to_FMR_description_COMPARE Subsidy_Active_COMPARE Program_COMPARE
UPDATE_HISTORY_RECS UPDATE_VARS_EXCEPT Units_Assist_EXCEPT POA_start_EXCEPT POA_end_EXCEPT Compl_end_EXCEPT 
rent_to_FMR_description_EXCEPT Subsidy_Active_EXCEPT Program_EXCEPT
UPDATE_HISTORY_RECS UPDATE_VARS_DIF_CHAR Program_DIF rent_to_FMR_description_DIF
UPDATE_HISTORY_RECS UPDATE_VARS_DIF_NUM Compl_end_DIF POA_end_DIF POA_start_DIF Subsidy_Active_DIF Units_Assist_DIF
UPDATE_HISTORY_RECS UPDATE_VARS_BASE_CHAR Program_BASE rent_to_FMR_description_BASE
UPDATE_HISTORY_RECS UPDATE_VARS_BASE_NUM Compl_end_BASE POA_end_BASE POA_start_BASE Subsidy_Active_BASE Units_Assist_BASE
UPDATE_HISTORY_RECS UPDATE_VARS_COMPARE_CHAR Program_COMPARE rent_to_FMR_description_COMPARE
UPDATE_HISTORY_RECS UPDATE_VARS_COMPARE_NUM Compl_end_COMPARE POA_end_COMPARE POA_start_COMPARE Subsidy_Active_COMPARE 
Units_Assist_COMPARE
UPDATE_HISTORY_RECS UPDATE_VARS_EXCEPT_CHAR Program_EXCEPT rent_to_FMR_description_EXCEPT
UPDATE_HISTORY_RECS UPDATE_VARS_EXCEPT_NUM Compl_end_EXCEPT POA_end_EXCEPT POA_start_EXCEPT Subsidy_Active_EXCEPT 
Units_Assist_EXCEPT
MPRINT(UPDATE_HISTORY_RECS):   data Update_subsidy_history_recs;
MPRINT(UPDATE_HISTORY_RECS):   set update_subsidy_result_except_tr;
MPRINT(UPDATE_HISTORY_RECS):   format Units_Assist_DIF POA_start_DIF POA_end_DIF Compl_end_DIF rent_to_FMR_description_DIF 
Subsidy_Active_DIF Program_DIF ;
MPRINT(UPDATE_HISTORY_RECS):   array difnum{*} Compl_end_DIF POA_end_DIF POA_start_DIF Subsidy_Active_DIF Units_Assist_DIF;
MPRINT(UPDATE_HISTORY_RECS):   array difchar{*} Program_DIF rent_to_FMR_description_DIF;
MPRINT(UPDATE_HISTORY_RECS):   array compchar{*} Program_COMPARE rent_to_FMR_description_COMPARE;
MPRINT(UPDATE_HISTORY_RECS):   array compnum{*} Compl_end_COMPARE POA_end_COMPARE POA_start_COMPARE Subsidy_Active_COMPARE 
Units_Assist_COMPARE;
MPRINT(UPDATE_HISTORY_RECS):   array basechar{*} Program_BASE rent_to_FMR_description_BASE;
MPRINT(UPDATE_HISTORY_RECS):   array basenum{*} Compl_end_BASE POA_end_BASE POA_start_BASE Subsidy_Active_BASE 
Units_Assist_BASE;
MPRINT(UPDATE_HISTORY_RECS):   array exceptchar{*} Program_EXCEPT rent_to_FMR_description_EXCEPT;
MPRINT(UPDATE_HISTORY_RECS):   array exceptnum{*} Compl_end_EXCEPT POA_end_EXCEPT POA_start_EXCEPT Subsidy_Active_EXCEPT 
Units_Assist_EXCEPT;
41 The SAS System                                                                              12:23 Saturday, July 25, 2015

MPRINT(UPDATE_HISTORY_RECS):   Write = 0;
MPRINT(UPDATE_HISTORY_RECS):   do i = 1 to dim( difnum );
MPRINT(UPDATE_HISTORY_RECS):   if not( missing( compnum{i} ) or not( abs( difnum{i} ) > 0 ) ) or not( missing( exceptnum{i} 
) ) then do;
MPRINT(UPDATE_HISTORY_RECS):   Write = 1;
MPRINT(UPDATE_HISTORY_RECS):   end;
MPRINT(UPDATE_HISTORY_RECS):   else do;
MPRINT(UPDATE_HISTORY_RECS):   basenum{i} = .;
MPRINT(UPDATE_HISTORY_RECS):   compnum{i} = .;
MPRINT(UPDATE_HISTORY_RECS):   exceptnum{i} = .;
MPRINT(UPDATE_HISTORY_RECS):   end;
MPRINT(UPDATE_HISTORY_RECS):   end;
MPRINT(UPDATE_HISTORY_RECS):   do i = 1 to dim( difchar );
MPRINT(UPDATE_HISTORY_RECS):   difchar{i} = compress( difchar{i}, "." );
MPRINT(UPDATE_HISTORY_RECS):   if not( missing( compchar{i} ) or not( abs( difchar{i} ) > 0 ) ) or not( missing( 
exceptchar{i} ) ) then do;
MPRINT(UPDATE_HISTORY_RECS):   Write = 1;
MPRINT(UPDATE_HISTORY_RECS):   end;
MPRINT(UPDATE_HISTORY_RECS):   else do;
MPRINT(UPDATE_HISTORY_RECS):   basechar{i} = "";
MPRINT(UPDATE_HISTORY_RECS):   compchar{i} = "";
MPRINT(UPDATE_HISTORY_RECS):   exceptchar{i} = "";
MPRINT(UPDATE_HISTORY_RECS):   end;
MPRINT(UPDATE_HISTORY_RECS):   end;
MPRINT(UPDATE_HISTORY_RECS):   if Write;
MPRINT(UPDATE_HISTORY_RECS):   drop i Write Category_code Units_Assist_DIF POA_start_DIF POA_end_DIF Compl_end_DIF 
rent_to_FMR_description_DIF Subsidy_Active_DIF Program_DIF;
MPRINT(UPDATE_HISTORY_RECS):   run;

NOTE: Character values have been converted to numeric values at the places given by: (Line):(Column).
      599:125   
NOTE: Missing values were generated as a result of performing an operation on missing values.
      Each place is given by: (Number of times) at (Line):(Column).
      1104 at 599:37   462 at 599:120   
NOTE: There were 231 observations read from the data set WORK.UPDATE_SUBSIDY_RESULT_EXCEPT_TR.
NOTE: The data set WORK.UPDATE_SUBSIDY_HISTORY_RECS has 10 observations and 27 variables.
NOTE: Compressing data set WORK.UPDATE_SUBSIDY_HISTORY_RECS increased size by 100.00 percent. 
      Compressed is 2 pages; un-compressed would require 1 pages.
NOTE: DATA statement used (Total process time):
      real time           0.02 seconds
      cpu time            0.00 seconds
      

600        
601        data Update_subsidy_history_del;
602        
42 The SAS System                                                                              12:23 Saturday, July 25, 2015

603          set PresCat.Update_subsidy_history;
604        
605          if Subsidy_info_source = &Subsidy_info_source and Subsidy_info_source_date = &Subsidy_Info_Source_Date then
605      ! delete;
606        
607        run;

NOTE: There were 0 observations read from the data set PRESCAT.UPDATE_SUBSIDY_HISTORY.
NOTE: The data set WORK.UPDATE_SUBSIDY_HISTORY_DEL has 0 observations and 27 variables.
NOTE: DATA statement used (Total process time):
      real time           0.02 seconds
      cpu time            0.00 seconds
      

608        
609        data Update_subsidy_history;
610        
611          update updatemode=nomissingcheck
612            Update_subsidy_history_del
613            Update_subsidy_history_recs;
614          by Nlihc_id Subsidy_id Subsidy_info_source Subsidy_info_source_date;
615        
616        run;

NOTE: There were 0 observations read from the data set WORK.UPDATE_SUBSIDY_HISTORY_DEL.
NOTE: There were 10 observations read from the data set WORK.UPDATE_SUBSIDY_HISTORY_RECS.
NOTE: The data set WORK.UPDATE_SUBSIDY_HISTORY has 10 observations and 27 variables.
NOTE: Compressing data set WORK.UPDATE_SUBSIDY_HISTORY increased size by 100.00 percent. 
      Compressed is 2 pages; un-compressed would require 1 pages.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

617        
618        %File_info( data=Update_subsidy_history, stats= )
MPRINT(FILE_INFO):   title2 "File = Update_subsidy_history";
MPRINT(FILE_INFO):   proc contents data=Update_subsidy_history;
MPRINT(FILE_INFO):   run;

NOTE: PROCEDURE CONTENTS used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      
NOTE: The PROCEDURE CONTENTS printed pages 66-67.

43 The SAS System                                                                              12:23 Saturday, July 25, 2015

MPRINT(FILE_INFO):   proc print data=Update_subsidy_history (obs=10);
MPRINT(FILE_INFO):   title3 "Printing first 10 obs.";
MPRINT(FILE_INFO):   run;

NOTE: There were 10 observations read from the data set WORK.UPDATE_SUBSIDY_HISTORY.
NOTE: The PROCEDURE PRINT printed pages 68-69.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

MPRINT(FILE_INFO):   title3;
MPRINT(FILE_INFO):   title2;
619        
620        
621        ***** Create update report *****;
622        
623        /** Macro Write_var - Start Definition **/
624        
625        %macro Write_var( var=, fmt=, lbl=, typ=n );
626        
627          %if &lbl = %then %do;
628            Var = "&var";
629          %end;
630          %else %do;
631            Var = &lbl;
632          %end;
633        
634          Old_value = put( &var._Base, &fmt );
635        
636          %if %upcase( &typ ) = N %then %do;
637        
638            if missing( &var._Compare ) or not( abs( &var._DIF ) > 0 ) then New_value = "-";
639            else New_value = put( &var._Compare, &fmt );
640        
641          %end;
642          %else %do;
643        
644            &var._DIF = compress( &var._DIF, '.' );
645        
646            if missing( &var._Compare ) or missing( &var._DIF ) then New_value = "-";
647            else New_value = put( &var._Compare, &fmt );
648        
649          %end;
650        
651          if missing( &var._EXCEPT ) then Except_value = "-";
44 The SAS System                                                                              12:23 Saturday, July 25, 2015

652          else Except_value = put( &var._EXCEPT, &fmt );
653        
654          if New_value ~= "-" or Except_value ~= "-" then output;
655        
656        %mend Write_var;
657        
658        /** End Macro Definition **/
659        
660        proc sort data=Update_subsidy_result_except_tr;
661          by Category_code nlihc_id subsidy_id;
662        run;

NOTE: There were 231 observations read from the data set WORK.UPDATE_SUBSIDY_RESULT_EXCEPT_TR.
NOTE: SAS sort was used.
NOTE: The data set WORK.UPDATE_SUBSIDY_RESULT_EXCEPT_TR has 231 observations and 36 variables.
NOTE: Compressing data set WORK.UPDATE_SUBSIDY_RESULT_EXCEPT_TR decreased size by 44.44 percent. 
      Compressed is 5 pages; un-compressed would require 9 pages.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.02 seconds
      cpu time            0.01 seconds
      

663        
664        data Update_subsidy_result_report;
665        
666          set Update_subsidy_result_except_tr;
667        
668          length Subsidy_desc $ 400;
669        
670          if not missing( Program_Compare ) then Subsidy_desc = put( Program_Compare, $progshrt. );
671          else Subsidy_desc = put( Program_Base, $progshrt. );
672        
673          if not missing( Subsidy_Info_Source_ID ) then
674            Subsidy_desc = trim( Subsidy_desc ) || ' [' || trim( Subsidy_Info_Source_ID ) || ']';
675        
676          length Var $ 32 Old_value New_value Except_value $ 80;
677        
678          %Write_var( var=Subsidy_active, fmt=dyesno., lbl="Subsidy active" )
MPRINT(WRITE_VAR):   Var = "Subsidy active";
MPRINT(WRITE_VAR):   Old_value = put( Subsidy_active_Base, dyesno. );
MPRINT(WRITE_VAR):   if missing( Subsidy_active_Compare ) or not( abs( Subsidy_active_DIF ) > 0 ) then New_value = "-";
MPRINT(WRITE_VAR):   else New_value = put( Subsidy_active_Compare, dyesno. );
MPRINT(WRITE_VAR):   if missing( Subsidy_active_EXCEPT ) then Except_value = "-";
MPRINT(WRITE_VAR):   else Except_value = put( Subsidy_active_EXCEPT, dyesno. );
MPRINT(WRITE_VAR):   if New_value ~= "-" or Except_value ~= "-" then output;
679          %Write_var( var=POA_start, fmt=mmddyy10., lbl="Affordability start" )
45 The SAS System                                                                              12:23 Saturday, July 25, 2015

MPRINT(WRITE_VAR):   Var = "Affordability start";
MPRINT(WRITE_VAR):   Old_value = put( POA_start_Base, mmddyy10. );
MPRINT(WRITE_VAR):   if missing( POA_start_Compare ) or not( abs( POA_start_DIF ) > 0 ) then New_value = "-";
MPRINT(WRITE_VAR):   else New_value = put( POA_start_Compare, mmddyy10. );
MPRINT(WRITE_VAR):   if missing( POA_start_EXCEPT ) then Except_value = "-";
MPRINT(WRITE_VAR):   else Except_value = put( POA_start_EXCEPT, mmddyy10. );
MPRINT(WRITE_VAR):   if New_value ~= "-" or Except_value ~= "-" then output;
680          %Write_var( var=POA_end, fmt=mmddyy10., lbl="Affordability end" )
MPRINT(WRITE_VAR):   Var = "Affordability end";
MPRINT(WRITE_VAR):   Old_value = put( POA_end_Base, mmddyy10. );
MPRINT(WRITE_VAR):   if missing( POA_end_Compare ) or not( abs( POA_end_DIF ) > 0 ) then New_value = "-";
MPRINT(WRITE_VAR):   else New_value = put( POA_end_Compare, mmddyy10. );
MPRINT(WRITE_VAR):   if missing( POA_end_EXCEPT ) then Except_value = "-";
MPRINT(WRITE_VAR):   else Except_value = put( POA_end_EXCEPT, mmddyy10. );
MPRINT(WRITE_VAR):   if New_value ~= "-" or Except_value ~= "-" then output;
681          %Write_var( var=Units_assist, fmt=comma10., lbl="Assisted units" )
MPRINT(WRITE_VAR):   Var = "Assisted units";
MPRINT(WRITE_VAR):   Old_value = put( Units_assist_Base, comma10. );
MPRINT(WRITE_VAR):   if missing( Units_assist_Compare ) or not( abs( Units_assist_DIF ) > 0 ) then New_value = "-";
MPRINT(WRITE_VAR):   else New_value = put( Units_assist_Compare, comma10. );
MPRINT(WRITE_VAR):   if missing( Units_assist_EXCEPT ) then Except_value = "-";
MPRINT(WRITE_VAR):   else Except_value = put( Units_assist_EXCEPT, comma10. );
MPRINT(WRITE_VAR):   if New_value ~= "-" or Except_value ~= "-" then output;
682          %Write_var( var=rent_to_FMR_description, fmt=$80., lbl="Rent level", typ=c )
MPRINT(WRITE_VAR):   Var = "Rent level";
MPRINT(WRITE_VAR):   Old_value = put( rent_to_FMR_description_Base, $80. );
MPRINT(WRITE_VAR):   rent_to_FMR_description_DIF = compress( rent_to_FMR_description_DIF, '.' );
MPRINT(WRITE_VAR):   if missing( rent_to_FMR_description_Compare ) or missing( rent_to_FMR_description_DIF ) then New_value 
= "-";
MPRINT(WRITE_VAR):   else New_value = put( rent_to_FMR_description_Compare, $80. );
MPRINT(WRITE_VAR):   if missing( rent_to_FMR_description_EXCEPT ) then Except_value = "-";
MPRINT(WRITE_VAR):   else Except_value = put( rent_to_FMR_description_EXCEPT, $80. );
MPRINT(WRITE_VAR):   if New_value ~= "-" or Except_value ~= "-" then output;
683          %Write_var( var=Program, fmt=$80., lbl=, typ=c )
MPRINT(WRITE_VAR):   Var = "Program";
MPRINT(WRITE_VAR):   Old_value = put( Program_Base, $80. );
MPRINT(WRITE_VAR):   Program_DIF = compress( Program_DIF, '.' );
MPRINT(WRITE_VAR):   if missing( Program_Compare ) or missing( Program_DIF ) then New_value = "-";
MPRINT(WRITE_VAR):   else New_value = put( Program_Compare, $80. );
MPRINT(WRITE_VAR):   if missing( Program_EXCEPT ) then Except_value = "-";
MPRINT(WRITE_VAR):   else Except_value = put( Program_EXCEPT, $80. );
MPRINT(WRITE_VAR):   if New_value ~= "-" or Except_value ~= "-" then output;
684        
685          keep category_code nlihc_id Subsidy_ID Subsidy_desc Program_Compare Subsidy_Info_Source_ID
686               Var Old_value New_value Except_value;
687        
46 The SAS System                                                                              12:23 Saturday, July 25, 2015

688        run;

NOTE: Missing values were generated as a result of performing an operation on missing values.
      Each place is given by: (Number of times) at (Line):(Column).
      220 at 678:45   221 at 679:45   221 at 680:45   221 at 681:45   
NOTE: There were 231 observations read from the data set WORK.UPDATE_SUBSIDY_RESULT_EXCEPT_TR.
NOTE: The data set WORK.UPDATE_SUBSIDY_RESULT_REPORT has 14 observations and 10 variables.
NOTE: Compressing data set WORK.UPDATE_SUBSIDY_RESULT_REPORT increased size by 100.00 percent. 
      Compressed is 2 pages; un-compressed would require 1 pages.
NOTE: DATA statement used (Total process time):
      real time           0.02 seconds
      cpu time            0.03 seconds
      

689        
690        %Data_to_format(
691          FmtLib=work,
692          FmtName=$nlihcid_proj,
693          Desc=,
694          Data=PresCat.Project (where=(not(missing(nlihc_id)))),
695          Value=nlihc_id,
696          Label=trim(nlihc_id)||' / '||left(proj_name),
697          OtherLabel='** Unidentified project **',
698          DefaultLen=.,
699          MaxLen=.,
700          MinLen=.,
701          Print=N,
702          Contents=N
703          )
NOTE: [Data_to_format] Starting macro.
MPRINT(DATA_TO_FORMAT):   data _cntlin (compress=no);
MPRINT(DATA_TO_FORMAT):   length hlo $ 8;
MPRINT(DATA_TO_FORMAT):   retain fmtname "$nlihcid_proj" type "C" default . max . min .;
MPRINT(DATA_TO_FORMAT):   retain hlo " ";
MPRINT(DATA_TO_FORMAT):   set PresCat.Project (where=(not(missing(nlihc_id)))) end=last;
MPRINT(DATA_TO_FORMAT):   label = trim(nlihc_id)||' / '||left(proj_name);
MPRINT(DATA_TO_FORMAT):   start = nlihc_id;
MPRINT(DATA_TO_FORMAT):   output;
MPRINT(DATA_TO_FORMAT):   if last then do;
MPRINT(DATA_TO_FORMAT):   hlo = trim( hlo ) || 'o';
MPRINT(DATA_TO_FORMAT):   label = '** Unidentified project **';
MPRINT(DATA_TO_FORMAT):   output;
MPRINT(DATA_TO_FORMAT):   end;
MPRINT(DATA_TO_FORMAT):   keep fmtname type hlo label start default max min;
MPRINT(DATA_TO_FORMAT):   run;

47 The SAS System                                                                              12:23 Saturday, July 25, 2015

NOTE: There were 362 observations read from the data set PRESCAT.PROJECT.
      WHERE not MISSING(nlihc_id);
NOTE: The data set WORK._CNTLIN has 363 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

MPRINT(DATA_TO_FORMAT):   proc format library=work cntlin=_cntlin;
NOTE: Format $NLIHCID_PROJ has been output.
MPRINT(DATA_TO_FORMAT):   run;

NOTE: PROCEDURE FORMAT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      
NOTE: There were 363 observations read from the data set WORK._CNTLIN.

MPRINT(DATA_TO_FORMAT):   proc datasets library=work memtype=(data) nolist;
MPRINT(DATA_TO_FORMAT):   delete _cntlin;
MPRINT(DATA_TO_FORMAT):   quit;

NOTE: Deleting WORK._CNTLIN (memtype=DATA).
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

NOTE: [Data_to_format] Exiting macro.
704        
705        proc format;
706          value $except_tl
707            "-" = 'white'
708            other = 'yellow';
NOTE: Format $EXCEPT_TL has been output.
709        run;

NOTE: PROCEDURE FORMAT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

710        
711        ods listing close;
712        ods pdf file="&_dcdata_r_path\PresCat\Prog\Updates\Update_&Update_file._subsidy.pdf"
713          style=Styles.Rtf_arial_9pt pdftoc=2 bookmarklist=hide uniform;
48 The SAS System                                                                              12:23 Saturday, July 25, 2015

NOTE: Writing ODS PDF output to DISK destination 
      "C:\DCData\Libraries\PresCat\Prog\Updates\Update_Sec8mf_2014_11_subsidy.pdf", printer "PDF".
714        
715        proc report data=Update_subsidy_result_report nowd;
716          by category_code ;
717          column nlihc_id Subsidy_id Subsidy_desc Var Old_value New_value Except_value;
718          define nlihc_id / order noprint;
719          define Subsidy_id / display "ID" style=[textalign=center];
720          define Subsidy_desc / display "Subsidy [source ID]" style=[textalign=left];
721          define Var / display "Var" style=[textalign=left];
722          define Old_value / display "Old value" style=[textalign=left];
723          define New_value / display "New value" style=[textalign=left];
724          define Except_value / display "Exception" style(column)=[background=$except_tl. textalign=left];
725          break before nlihc_id / ;
726          compute before nlihc_id / style=[textalign=left fontweight=bold];
727            line nlihc_id $nlihcid_proj.;
728          endcomp;
729          label category_code = 'Category';
730          title2 " ";
731          title3 "PresCat.Subsidy - Updated variables";
732        run;

NOTE: There were 14 observations read from the data set WORK.UPDATE_SUBSIDY_RESULT_REPORT.
NOTE: PROCEDURE REPORT used (Total process time):
      real time           0.15 seconds
      cpu time            0.15 seconds
      

733        
734        /***
735        proc print data=Update_subsidy_result_report label;
736          by category_code nlihc_id;
737          id Subsidy_id Subsidy_desc;
738          var Var Old_value New_value;
739          var Except_value / style(data) = [background=$except_tl.];
740          label
741            category_code = "Category"
742            nlihc_id = "Project"
743            Subsidy_ID = "ID"
744            Subsidy_desc = "Subsidy [source ID]"
745            Var = "Var"
746            Old_value = "Old value"
747            New_value = "Update"
748            Except_value = "Exception";
749          format nlihc_id $nlihcid_proj. Program_Compare $progshrt.;
750          title2 " ";
49 The SAS System                                                                              12:23 Saturday, July 25, 2015

751          title3 "PresCat.Subsidy - Updated variables";
752        run;
753        ***/
754        
755        ** Non-matching records **;
756        
757        proc print data=Subsidy_mfa_update_a label;
758          where missing( nlihc_id );
759          id Subsidy_Info_Source_ID;
760          var property_name_text address_line1_text program_type_name Subsidy_active Units_assist poa_start poa_end;
761          label
762            address_line1_text = "Address"
763            program_type_name = "Program";
764          title3 "PresCat.Subsidy - Unmatched subsidy records in update file";
765        run;

NOTE: No observations were selected from data set WORK.SUBSIDY_MFA_UPDATE_A.
NOTE: There were 0 observations read from the data set WORK.SUBSIDY_MFA_UPDATE_A.
      WHERE MISSING(nlihc_id);
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

766        
767        title2;
768        
769        ods pdf close;
NOTE: ODS PDF printed 3 pages to C:\DCData\Libraries\PresCat\Prog\Updates\Update_Sec8mf_2014_11_subsidy.pdf.
770        ods listing;
NOTE: SAS Institute Inc., SAS Campus Drive, Cary, NC USA 27513-2414
NOTE: The SAS System used:
      real time           5.08 seconds
      cpu time            5.06 seconds
      

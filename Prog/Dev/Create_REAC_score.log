1                                         The SAS System        14:24 Wednesday, September 2, 2015

NOTE: Copyright (c) 2002-2008 by SAS Institute Inc., Cary, NC, USA. 
NOTE: SAS (r) Proprietary Software 9.2 (TS2M3) 
      Licensed to THE URBAN INSTITUTE, Site 70097024.
NOTE: This session is executing on the X64_VSPRO  platform.



NOTE: SAS initialization used:
      real time           0.71 seconds
      cpu time            0.23 seconds
      

NOTE: AUTOEXEC processing beginning; file is D:\Users\ptatian\Documents\My SAS 
      Files\9.2\Autoexnt.sas.


NOTE: AUTOEXEC processing completed.

1          /**************************************************************************
2           Program:  Create_REAC_score.sas
3           Library:  PresCat
4           Project:  NeighborhoodInfo DC
5           Author:   P. Tatian
6           Created:  08/20/13
7           Version:  SAS 9.1
8           Environment:  Windows
9          
10          Description:  Create REAC_score table for DC Preservation Catalog.
11         
12          Modifications:
13           12/19/14 PAT Updated for SAS1. Added variable labels.
14           08/31/15 PAT Replace PresCat.DC_Info with PresCat.DC_Info_07_08_15.
15           09/02/15 PAT Combine scores from three DC_Info extracts. Correct
16                        problem with non-integer dates.
17         **************************************************************************/
18         
19         %include "L:\SAS\Inc\StdLocal.sas";
NOTE: Libref _METADAT was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: L:\Libraries\Metadata\Data
65        +
66        +options ls=124 ps=48;    ** Landscape **;
67        +
68        +** Output title **;
69        +
70        +title "&_library/&_program:  NeighborhoodInfo DC";
2 The SAS System                                                                          14:24 Wednesday, September 2, 2015

71        +
72        +** Define General library for local session only **;
73        +
74        +%DCData_lib( General, env=windows, macdef=dcautos uiautos sasautos )
MPRINT(DCDATA_LIB):   options nomprint;
NOTE: Libref GENERA_L was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: D:\DCData\Libraries\General\Data
NOTE: Libref GENERA_R was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: L:\Libraries\General\Data
NOTE: Libref GENERAL was successfully assigned as follows: 
      Levels:           2
      Engine(1):        V9 
      Physical Name(1): D:\DCData\Libraries\General\Data
      Engine(2):        V9 
      Physical Name(2): L:\Libraries\General\Data

=====================================================================
Current FmtSearch Option value:

     WORK* LIBRARY* GENERAL

   *implicitly included by default.

=====================================================================
Status of current catalogs:

NOTE:    WORK.FORMATS DOES NOT EXIST
NOTE:    LIBRARY.FORMATS DOES NOT EXIST
NOTE:    GENERAL.FORMATS EXISTS
=====================================================================


=====================================================================
Current Sasautos Option value:

     TTAUTOS  GENERA_L DCAUTOS UIAUTOS SASAUTOS

=====================================================================


=====================================================================
Current Sasautos Option value:

     TTAUTOS GENERA_L  GENERA_R DCAUTOS UIAUTOS SASAUTOS
3 The SAS System                                                                          14:24 Wednesday, September 2, 2015


=====================================================================

75        +
76        +%let _userid = %sysfunc( putc( %lowcase(&SYSUSERID), $longusr. ) );
NOTE: %INCLUDE (level 1) ending.
77         
78         ** Define libraries **;
79         %DCData_lib( PresCat, local=n )
MPRINT(DCDATA_LIB):   options nomprint;
NOTE: Libref PRESCA_R was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: L:\Libraries\PresCat\Data
NOTE: Libref PRESCAT was successfully assigned as follows: 
      Levels:           1
      Engine(1):        V9 
      Physical Name(1): L:\Libraries\PresCat\Data

=====================================================================
Current FmtSearch Option value:

     WORK* LIBRARY* GENERAL PRESCAT

   *implicitly included by default.

=====================================================================
Status of current catalogs:

NOTE:    WORK.FORMATS DOES NOT EXIST
NOTE:    LIBRARY.FORMATS DOES NOT EXIST
NOTE:    GENERAL.FORMATS EXISTS
NOTE:    PRESCAT.FORMATS EXISTS
=====================================================================


=====================================================================
Current Sasautos Option value:

     TTAUTOS  PRESCA_R GENERA_L GENERA_R DCAUTOS UIAUTOS SASAUTOS

=====================================================================

80         
81         data PresCat.REAC_score (label="Preservation Catalog, REAC scores");
82         
83           length Nlihc_id $ 8;
4 The SAS System                                                                          14:24 Wednesday, September 2, 2015

84         
85           set
86             PresCat.DC_Info (keep=nlihc_id pass:)
87             PresCat.DC_Info_10_19_14 (keep=nlihc_id pass:)
88             PresCat.DC_Info_07_08_15
89               (keep=nlihc_id pass:
90                rename=(pass1_date=pass1_dtm pass2_date=pass2_dtm pass3_date=pass3_dtm)
91                in=in3);
INFO: Data file PRESCAT.DC_INFO_07_08_15.DATA is in a format that is native to another host, or the file encoding does not 
match the session encoding. Cross Environment Data Access will be used, which might require additional CPU resources and 
might reduce performance.
92         
93           ** 7/8/15 file has datetime values, convert to dates **;
94         
95           if in3 then do;
96             pass1_date = datepart( pass1_dtm );
97             pass2_date = datepart( pass2_dtm );
98             pass3_date = datepart( pass3_dtm );
99           end;
100        
101          array scores{*} pass1_score pass2_score pass3_score;
102          array dates{*} pass1_date pass2_date pass3_date;
103        
104          length REAC_date 8 REAC_score $ 8 REAC_score_num 8 REAC_score_letter $ 1 REAC_score_star $ 1;
105        
106          do i = 1 to dim( scores );
107        
108            if not( missing ( scores{i} ) ) then do;
109        
110              REAC_date = int( dates{i} );
111              REAC_score = left( lowcase( scores{i} ) );
112        
113              j = indexc( REAC_score, 'abcdefghijklmnopqrstuvwxyz' );
114        
115              REAC_score_num = input( substr( REAC_score, 1, j - 1 ), 3. );
116              REAC_score_letter = substr( REAC_score, j, 1 );
117              REAC_score_star = substr( REAC_score, j + 1, 1 );
118        
119              output;
120        
121            end;
122        
123          end;
124        
125          label
126            Nlihc_id = "Preservation Catalog project ID"
5 The SAS System                                                                          14:24 Wednesday, September 2, 2015

127            REAC_date = "REAC inspection date"
128            REAC_score = "REAC inspection score"
129            REAC_score_num = "REAC inspection score, number part"
130            REAC_score_letter = "REAC inspection score, letter part"
131            REAC_score_star = "REAC inspection score, star (*) part";
132        
133          keep nlihc_id REAC_: ;
134        
135          format REAC_date mmddyy10.;
136        
137        run;

NOTE: Missing values were generated as a result of performing an operation on missing values.
      Each place is given by: (Number of times) at (Line):(Column).
      243 at 96:18   243 at 97:18   243 at 98:18   
NOTE: There were 359 observations read from the data set PRESCAT.DC_INFO.
NOTE: There were 361 observations read from the data set PRESCAT.DC_INFO_10_19_14.
NOTE: There were 361 observations read from the data set PRESCAT.DC_INFO_07_08_15.
NOTE: The data set PRESCAT.REAC_SCORE has 1087 observations and 6 variables.
NOTE: Compressing data set PRESCAT.REAC_SCORE decreased size by 0.00 percent. 
      Compressed is 12 pages; un-compressed would require 12 pages.
NOTE: DATA statement used (Total process time):
      real time           0.18 seconds
      cpu time            0.03 seconds
      

138        
139        proc sort data=PresCat.REAC_score nodupkey;
140          by nlihc_id descending REAC_date;
141        
142        %File_info( data=PresCat.REAC_score, printobs=50, freqvars=REAC_score_letter REAC_score_star )
MPRINT(FILE_INFO):   title2 "File = PresCat.REAC_score";

NOTE: There were 1087 observations read from the data set PRESCAT.REAC_SCORE.
NOTE: SAS sort was used.
NOTE: 594 observations with duplicate key values were deleted.
NOTE: The data set PRESCAT.REAC_SCORE has 493 observations and 6 variables.
NOTE: Compressing data set PRESCAT.REAC_SCORE increased size by 16.67 percent. 
      Compressed is 7 pages; un-compressed would require 6 pages.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.03 seconds
      cpu time            0.00 seconds
      

MPRINT(FILE_INFO):   proc contents data=PresCat.REAC_score;
MPRINT(FILE_INFO):   run;
6 The SAS System                                                                          14:24 Wednesday, September 2, 2015


NOTE: PROCEDURE CONTENTS used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      
NOTE: The PROCEDURE CONTENTS printed page 1.

MPRINT(FILE_INFO):   proc print data=PresCat.REAC_score (obs=50);
MPRINT(FILE_INFO):   title3 "Printing first 50 obs.";
MPRINT(FILE_INFO):   run;

NOTE: There were 50 observations read from the data set PRESCAT.REAC_SCORE.
NOTE: The PROCEDURE PRINT printed pages 2-3.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

MPRINT(FILE_INFO):   title3;
MPRINT(FILE_INFO):   options nolabel;
MPRINT(FILE_INFO):   proc means data=PresCat.REAC_score n sum mean stddev min max;
MPRINT(FILE_INFO):   run;

NOTE: Multiple concurrent threads will be used to summarize data.
NOTE: There were 493 observations read from the data set PRESCAT.REAC_SCORE.
NOTE: The PROCEDURE MEANS printed page 4.
NOTE: PROCEDURE MEANS used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

MPRINT(FILE_INFO):   options label;
MPRINT(FILE_INFO):   proc freq data=PresCat.REAC_score;
MPRINT(FILE_INFO):   tables REAC_score_letter REAC_score_star / missing;
MPRINT(FILE_INFO):   run;

NOTE: There were 493 observations read from the data set PRESCAT.REAC_SCORE.
NOTE: The PROCEDURE FREQ printed page 5.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

MPRINT(FILE_INFO):   title2;
143        
144        proc freq data=PresCat.REAC_score;
7 The SAS System                                                                          14:24 Wednesday, September 2, 2015

145          tables REAC_date;
146          format REAC_date year.;
147        run;

NOTE: There were 493 observations read from the data set PRESCAT.REAC_SCORE.
NOTE: The PROCEDURE FREQ printed page 6.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

148        
149        **** Compare with earlier version ****;
150        
151        libname comp 'D:\DCData\Libraries\PresCat\Data\Old';
NOTE: Libref COMP was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: D:\DCData\Libraries\PresCat\Data\Old
152        
153        proc compare base=Comp.Reac_score compare=PresCat.Reac_score listall maxprint=(40,32000);
154          id nlihc_id descending REAC_date;
155        run;

NOTE: There were 366 observations read from the data set COMP.REAC_SCORE.
NOTE: There were 493 observations read from the data set PRESCAT.REAC_SCORE.
NOTE: The PROCEDURE COMPARE printed pages 7-75.
NOTE: PROCEDURE COMPARE used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

NOTE: SAS Institute Inc., SAS Campus Drive, Cary, NC USA 27513-2414
NOTE: The SAS System used:
      real time           1.43 seconds
      cpu time            0.48 seconds
      
